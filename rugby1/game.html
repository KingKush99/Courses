
<!doctype html><html lang='en'><head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width,initial-scale=1'><title>Rugby • Game</title>
<link rel='stylesheet' href='../assets/base.css'></head>
<body><a class='back' href='./'>← Back</a><script src='../assets/app.js'></script>
<main class="wrap" style="padding:0">
  <section class="card" style="max-width:none;width:100%;display:flex;gap:16px;min-height:80vh">
    <div style="flex:2;display:flex;flex-direction:column">
      <div>Role <select id="role"><option value="offense">Offense</option><option value="defense">Defense</option></select> • Play <select id="play"><option>slant</option><option>post</option><option>fade</option><option>go</option></select> <button id="start" class="pill-btn">Start</button> <span id="hud" style="margin-left:12px"></span></div>
      <canvas id="field" width="900" height="520" style="width:100%;background:#0a4d1a;border:2px solid #ffffff22;border-radius:12px;margin-top:8px"></canvas>
      <small class="hint">WASD / Arrows to move.</small>
    </div>
    <div style="flex:1">
      <h3>Playbook</h3>
      <div><a class="pill-btn" target="_blank" href="pdfs/Irish Plays.pdf">Irish Plays (PDF)</a> <a class="pill-btn" target="_blank" href="pdfs/OIRC Back Plays.pdf">OIRC Back Plays (PDF)</a></div>
      <embed id="embed" src="pdfs/Irish Plays.pdf#toolbar=0&view=Fit" type="application/pdf" style="width:100%;height:70vh;border-radius:12px;border:1px solid #ffffff22;margin-top:8px"/>
    </div>
  </section>
</main>
<script>
var c=document.getElementById('field'), ctx=c.getContext('2d');
var roleSel=document.getElementById('role'), playSel=document.getElementById('play'), hud=document.getElementById('hud');
var player={x:80,y:c.height-100,s:3}, defender={x: c.width/2, y:c.height/2, s:2.6}, carrier={x:120,y:c.height-120,s:2.8};
var endz={x:0,y:30,w:c.width,h:20}; var marker={x:c.width-160,y:c.height/2}; var running=false, role='offense', routePts=[]; var keys={};
document.addEventListener('keydown',e=>{ keys[e.key.toLowerCase()]=true; });
document.addEventListener('keyup',e=>{ keys[e.key.toLowerCase()]=false; });
function reset(){ player.x=80; player.y=c.height-100; defender.x=c.width/2; defender.y=c.height/2; carrier.x=120; carrier.y=c.height-120; marker={x:c.width-160,y:c.height/2}; routePts=build(playSel.value); }
function build(name){ var mid=c.height/2; if(name==='slant') return [{x:160,y:c.height-120},{x:360,y:mid-40},{x:520,y:mid-80}]; if(name==='post') return [{x:160,y:c.height-120},{x:360,y:mid+40},{x:c.width-140,y:80}]; if(name==='fade') return [{x:220,y:c.height-160},{x:420,y:c.height-220},{x:c.width-200,y:60}]; return [{x:200,y:c.height-140},{x:500,y:c.height-140},{x:c.width-120,y:c.height-160}]; }
function dist(a,b){ var dx=a.x-b.x, dy=a.y-b.y; return Math.hypot(dx,dy); }
function clamp(v,min,max){ return Math.max(min,Math.min(max,v)); }
function move(obj){ var up=keys['w']||keys['arrowup'], down=keys['s']||keys['arrowdown'], left=keys['a']||keys['arrowleft'], right=keys['d']||keys['arrowright']; if(up) obj.y-=obj.s; if(down) obj.y+=obj.s; if(left) obj.x-=obj.s; if(right) obj.x+=obj.s; obj.x=clamp(obj.x,10,c.width-10); obj.y=clamp(obj.y, endz.y+endz.h+10, c.height-10); }
function aiChase(chaser,target){ var ang=Math.atan2(target.y-chaser.y, target.x-chaser.x); chaser.x+=Math.cos(ang)*chaser.s*0.95; chaser.y+=Math.sin(ang)*chaser.s*0.95; }
function draw(){ ctx.clearRect(0,0,c.width,c.height); ctx.fillStyle='#0b6d24'; ctx.fillRect(endz.x,endz.y,endz.w,endz.h); ctx.strokeStyle='#ffffff55'; ctx.lineWidth=1; for(var y=endz.y+endz.h; y<c.height; y+=40){ ctx.beginPath(); ctx.moveTo(0,y); ctx.lineTo(c.width,y); ctx.stroke(); } ctx.fillStyle='#ffcc00'; ctx.beginPath(); ctx.arc(marker.x, marker.y, 8, 0, Math.PI*2); ctx.fill(); ctx.strokeStyle='#ffd166aa'; ctx.lineWidth=2; ctx.beginPath(); ctx.moveTo(80, c.height-100); for(var i=0;i<routePts.length;i++){ ctx.lineTo(routePts[i].x, routePts[i].y); } ctx.stroke(); ctx.fillStyle='#4da6ff'; ctx.beginPath(); ctx.arc(player.x, player.y, 10, 0, Math.PI*2); ctx.fill(); if(role==='offense'){ ctx.fillStyle='#ff5c5c'; ctx.beginPath(); ctx.arc(defender.x, defender.y, 10, 0, Math.PI*2); ctx.fill(); } else { ctx.fillStyle='#ffcc66'; ctx.beginPath(); ctx.arc(carrier.x, carrier.y, 10, 0, Math.PI*2); ctx.fill(); } }
function step(){ if(!running){ requestAnimationFrame(step); return; } if(role==='offense'){ move(player); aiChase(defender, player); if(dist(player, marker)<14){ running=false; hud.textContent='Catch! +1'; } if(dist(player, defender)<14){ running=false; hud.textContent='Tackled! 0'; } } else { move(player); var target={x:c.width/2, y:endz.y+endz.h+4}; aiChase(carrier, target); if(dist(player, carrier)<14){ running=false; hud.textContent='Tackle! +1'; } if(carrier.y<=endz.y+endz.h+6){ running=false; hud.textContent='Touchdown allowed! 0'; } } draw(); requestAnimationFrame(step); }
document.getElementById('start').onclick=function(){ role=roleSel.value; reset(); running=true; hud.textContent=''; draw(); };
roleSel.onchange=reset; playSel.onchange=reset; reset(); draw(); requestAnimationFrame(step);
</script>
</body></html>
