<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Music Maker</title>
<style>
  :root{ --fg:#fff; --bg1:#0b0b0f; --bg2:#1b0b00; --bg3:#3a0c00; --panel:#1a0f0a; --brand:#ff6b00; --muted:#ffd9b3; }
  *{box-sizing:border-box} html,body{height:100%}
  body{margin:0; font-family: "Comic Sans MS","Comic Sans",cursive; color:var(--fg); overflow-x:hidden;
       background:radial-gradient(1400px 800px at 50% 110%, #ff9f1a3a, transparent 60%),linear-gradient(120deg, var(--bg1), var(--bg2) 40%, var(--bg3));}
  a{color:#ffd166}
  .wrap{min-height:100vh; display:flex; align-items:center; justify-content:center; padding:8vh 24px; text-align:center;}
  h1{font-size:clamp(2rem,4vw+1rem,3rem); text-shadow:0 2px 20px #ff6b00aa; margin:0 0 6px;}
  .sub{opacity:.9; margin:0 0 18px;}

  /* Pretty course buttons */
  .grid{display:grid; gap:16px; width:min(840px,94vw); margin:16px auto 0; grid-template-columns: repeat(auto-fit, minmax(260px,1fr));}
  .card-btn{display:block; text-decoration:none; color:#fff; background:linear-gradient(180deg,#2b170d,#1d110b);
             border:1px solid #ffffff22; border-radius:18px; padding:16px; box-shadow:0 12px 24px #0009, inset 0 0 0 2px #0004; position:relative; overflow:hidden; transition:transform .15s ease, box-shadow .15s ease, background .15s ease;}
  .card-btn:hover{transform: translateY(-2px); box-shadow:0 16px 30px #000c; background:linear-gradient(180deg,#3a2013,#24150d);}
  .card-title{font-size:1.35rem; font-weight:800; letter-spacing:.4px; display:flex; align-items:center; gap:10px;}
  .card-desc{margin-top:6px; color:var(--muted); font-weight:600; text-align:left;}
  .pill{position:absolute; right:12px; top:12px; background:#ff6b00; color:#000; border-radius:999px; padding:4px 8px; font-weight:800; font-size:.8rem;}

  /* Round UI buttons */
  .round-btn{position:fixed; width:56px; height:56px; border-radius:50%; display:grid; place-items:center; color:#fff; cursor:pointer;
             background: radial-gradient(circle at 30% 30%, #ff9f1a, #ff6b00 60%, #3a0c00 100%); box-shadow: 0 8px 20px #000a; z-index:100;}
  .profile-btn{left:16px; top:16px;}
  .slots-btn{right:16px; bottom:16px;}
  .chat-btn{left:16px; bottom:16px;}
  .menu-btn{right:16px; top:16px;}
  .burger{position:relative; width:26px; height:18px;}
  .burger span{position:absolute; left:0; width:100%; height:3px; background:#fff; border-radius:2px; transition:transform .25s ease, opacity .2s ease, top .25s ease;}
  .burger span:nth-child(1){top:0} .burger span:nth-child(2){top:7.5px} .burger span:nth-child(3){top:15px}
  .menu-btn.open .burger span:nth-child(1){top:7.5px; transform:rotate(45deg)}
  .menu-btn.open .burger span:nth-child(2){opacity:0}
  .menu-btn.open .burger span:nth-child(3){top:7.5px; transform:rotate(-45deg)}

  /* Popovers / panels */
  .popover{position:absolute; width:520px; max-width:95vw; background:var(--panel); border:1px solid #ffffff1f; border-radius:14px; padding:14px; box-shadow:0 12px 24px #000a; display:none; z-index:2000; color:#ffd9b3; overflow:hidden;}
  .row{display:flex; align-items:center; gap:10px; margin:8px 0; flex-wrap:wrap;}
  .btn{padding:8px 12px; border-radius:8px; border:1px solid #fff2; background:#2a1b12; color:#fff; cursor:pointer; font-family: inherit;}
  select, input[type="range"], input[type="file"], input[type="text"]{background:#2a1b12; color:#fff; border:1px solid #fff2; border-radius:8px; padding:6px 8px; font-family: inherit;}
  .menu-panel{transform-origin: top right; transform: translateY(-10px) scale(.98); opacity:0; pointer-events:none; transition:transform .22s ease, opacity .22s ease;}
  .menu-panel.open{opacity:1; transform: translateY(0) scale(1); pointer-events:auto;}

  /* Back button */
  .back-fab{position:fixed; left:16px; top:86px; z-index:120; background:#2a1b12; border:1px solid #ffffff1a; color:#fff; padding:8px 12px; border-radius:999px; text-decoration:none;}
</style>
</head>
<body>
<a class="round-btn profile-btn" href="#" id="profileLink" title="Profile" aria-label="Profile">üë§</a>
<button class="round-btn menu-btn" id="menuBtn" title="Menu" aria-label="Menu"><div class="burger" aria-hidden="true"><span></span><span></span><span></span></div></button>
<button class="round-btn slots-btn" id="slotsBtn" title="Mini Slots" aria-label="Mini Slots">üé∞</button>
<button class="round-btn chat-btn" id="chatBtn" title="Assistant" aria-label="Assistant">üí¨</button>
<a class="back-fab" href="#" id="backBtn">‚Üê Back</a>

<main class="wrap">
  <div style="max-width:900px; margin:0 auto; text-align:left;">
    <h1>Music Maker</h1>
    <div style="background:var(--panel); border:1px solid #ffffff1a; border-radius:16px; padding:16px;">
      <p>Welcome to the Music Maker course. Adjust your progress below; it will sync to your Profile.</p>
      <div class="row"><label for="p">Progress</label><input id="p" type="range" min="0" max="100" value="0"><span id="pv">0%</span></div>
      <div style="height:10px;background:#2a1b12;border-radius:999px;overflow:hidden;border:1px solid #ffffff1a;margin-top:8px;"><div id="bar" style="height:100%;width:0%;background:#ffd166"></div></div>
    </div>
  </div>
</main>
<script>
  const key='progress_music-maker'; function load(){ const v=parseInt(localStorage.getItem(key)||'0',10); p.value=v; pv.textContent=v+'%'; bar.style.width=v+'%'; }
  function save(){ const v=parseInt(p.value,10); localStorage.setItem(key,String(v)); pv.textContent=v+'%'; bar.style.width=v+'%'; }
  const p=document.getElementById('p'), pv=document.getElementById('pv'), bar=document.getElementById('bar');
  p.addEventListener('input', save); load();
</script>

<!-- Mini Slots -->
<div class="popover" id="slotsPopover" role="dialog" aria-label="Mini Slots">
  <h3>Mini Slots</h3>
  <div class="row" style="justify-content:space-between">
    <div class="row"><strong>Reels</strong><select id="reelSelect"><option>3</option><option>4</option><option>5</option><option selected>6</option></select></div>
    <div class="row"><strong>Bet</strong><select id="betSelect"><option>10</option><option selected>25</option><option>50</option><option>100</option></select></div>
  </div>
  <div class="row" style="justify-content:center;margin-top:10px"><button class="btn" id="spinBtn">Spin</button></div>
</div>

<!-- Hamburger Menu -->
<div class="popover menu-panel" id="menuPanel" role="dialog" aria-label="Menu">
  <h3>Menu</h3>
  <div class="row"><strong>Music</strong> <label style="margin-left:auto">On/Off <input type="checkbox" id="musicToggle"></label></div>
  <div class="row"><label>Volume</label><select id="musicVol"><option value="0.2">Low</option><option value="0.6" selected>Medium</option><option value="1">High</option><option value="0">Mute</option></select>
    <label>Track</label><select id="musicTrack"><option value="default">Default</option><option value="arcade">Arcade</option><option value="chill">Chill</option></select></div>
  <hr style="border-color:#ffffff18">
  <div class="row"><strong>Display</strong></div>
  <div class="row"><label>Theme</label><select id="themeSel"><option>Dark</option><option>Light</option><option>High Contrast</option></select>
    <label>Text Size</label><select id="textSel"><option>Default</option><option>Small</option><option>Large</option></select></div>
  <hr style="border-color:#ffffff18">
  <div class="row"><strong>Notifications</strong></div>
  <div class="row"><label>Sound Alerts</label><input type="checkbox" id="notifSound"><label>Pop-ups</label><input type="checkbox" id="notifPopup" checked>
    <label>Frequency</label><select id="notifFreq"><option>All</option><option>Major Only</option></select></div>
</div>

<!-- Chat -->
<div class="popover" id="chatPopover"><h3>Assistant</h3>
  <div id="chatLog" style="height:220px;overflow:auto;background:#120b07;border:1px solid #ffffff1a;border-radius:10px;padding:10px"></div>
  <div style="display:flex;gap:8px;align-items:center;margin-top:8px">
    <input type="text" id="chatInput" placeholder="Ask me anything about the site‚Ä¶" style="flex:1;background:#2a1b12;border:1px solid #ffffff1a;border-radius:10px;padding:10px">
    <button class="btn" id="sendBtn">Send</button>
  </div>
</div>

<script>
const $=id=>document.getElementById(id);
function base(){ const segs=location.pathname.split('/').filter(Boolean); return location.origin+(segs.length?('/'+segs[0]):''); }

/* Back button */
$('backBtn').onclick=(e)=>{e.preventDefault(); try{history.length>1?history.back():location.assign(base()+'/');}catch(_){location.assign(base()+'/');}};

/* Profile link robust */
$('profileLink').onclick=(e)=>{e.preventDefault(); fetch(base()+'/profile.html',{method:'HEAD'}).then(r=>{location.href=r.ok?base()+'/profile.html':base()+'/profile/'}).catch(()=>location.href=base()+'/profile/')};

function openPanelAt(btn, panel, pos="below"){ const r=btn.getBoundingClientRect(); panel.style.display="block"; requestAnimationFrame(()=>{ const top=pos==="below"?(r.bottom+6):(r.top-panel.offsetHeight-6); let left=r.right-panel.offsetWidth; if(left<10) left=10; panel.style.top=top+"px"; panel.style.left=left+"px"; panel.classList.add('open'); }); }
function closePanels(){ document.querySelectorAll('.popover').forEach(p=>{p.classList.remove('open'); p.style.display='none';}); document.querySelector('.menu-btn').classList.remove('open'); }
window.addEventListener('click', e=>{ if(!e.target.closest('.popover') && !e.target.closest('.round-btn')) closePanels(); });

const menuBtn=$('menuBtn'), menuPanel=$('menuPanel'); menuBtn.onclick=()=>{ const open=menuPanel.style.display==='block'; if(open){closePanels();} else{ closePanels(); openPanelAt(menuBtn,menuPanel,"below"); menuBtn.classList.add('open'); } };
const slotsPopover=$('slotsPopover'); $('slotsBtn').onclick=()=>{ closePanels(); openPanelAt(slotsBtn, slotsPopover, "above"); };
const chatPopover=$('chatPopover'); $('chatBtn').onclick=()=>{ closePanels(); openPanelAt(chatBtn, chatPopover, "above"); };

/* Chatbot basics */
const chatLog=$('chatLog'), chatInput=$('chatInput'); 
function addMsg(who,txt){ const d=document.createElement('div'); d.innerHTML=`<div style="padding:8px 10px;border-radius:12px;background:${who==='me'?'#2a1b12':'#1f140d'};margin:6px 0;max-width:90%">${txt}</div>`; d.style.display='flex'; d.style.justifyContent=who==='me'?'flex-end':'flex-start'; chatLog.appendChild(d); chatLog.scrollTop=chatLog.scrollHeight; }
function detectLang(s){ if(/[‰Ω†Â•ΩË∞¢Ë∞¢ÂÜçËßÅ]/.test(s))return'zh'; if(/[√°√©√≠√≥√∫√±¬ø¬°]/i.test(s)||/\b(hola|ayuda|curso|ajustes|perfil)\b/i.test(s))return'es'; if(/[√©√®√™√†√ß√π]/i.test(s)||/\b(bonjour|salut|profil|r√©glages)\b/i.test(s))return'fr'; return'en'; }
function replyFor(lang, msg){ const t={
  en:{hi:"Hey! How can I help?",help:"I can answer questions about courses, slots, settings, or your profile.",slots:"Use üé∞ to open Mini Slots.",profile:"Tap üë§ for profile.",settings:"Open ‚ò∞ for theme, text size, music & notifications.",rugby:"Rugby now has Plays, Synopsis, and Quizzes pages."},
  es:{hi:"¬°Hola! ¬øEn qu√© puedo ayudarte?",help:"Puedo responder sobre cursos, tragamonedas, ajustes o tu perfil.",slots:"Usa üé∞ para Mini Slots.",profile:"Toca üë§ para tu perfil.",settings:"Abre ‚ò∞ para tema, texto, m√∫sica y notificaciones.",rugby:"Rugby ahora tiene p√°ginas de Jugadas, Sinopsis y Cuestionarios."},
  fr:{hi:"Salut !",help:"Je peux r√©pondre sur les cours, slots, r√©glages ou votre profil.",slots:"Utilisez üé∞ pour Mini Slots.",profile:"Appuyez sur üë§ pour le profil.",settings:"Ouvrez ‚ò∞ pour th√®me, texte, musique, notifications.",rugby:"Rugby a des pages Syst√®mes, Synopsis et Quizz."},
  zh:{hi:"‰Ω†Â•ΩÔºÅ",help:"ÊàëÂèØ‰ª•ÂõûÁ≠îËØæÁ®ã„ÄÅËÄÅËôéÊú∫„ÄÅËÆæÁΩÆÊàñ‰∏™‰∫∫ËµÑÊñôÁöÑÈóÆÈ¢ò„ÄÇ",slots:"ÁÇπÂáª üé∞ ÊâìÂºÄÂ∞èÊ∏∏Êàè„ÄÇ",profile:"ÁÇπÂáª üë§ ÊâìÂºÄ‰∏™‰∫∫‰∏ªÈ°µ„ÄÇ",settings:"ÁÇπÂáª ‚ò∞ Êõ¥Êîπ‰∏ªÈ¢ò„ÄÅÂ≠ó‰Ωì„ÄÅÈü≥‰πê„ÄÅÈÄöÁü•„ÄÇ",rugby:"Ê©ÑÊ¶ÑÁêÉËØæÁ®ãÂ∑≤ÂåÖÂê´ÊàòÊúØ„ÄÅÊ¶ÇËø∞ÂíåÊµãÈ™åÈ°µÈù¢„ÄÇ"}
}; 
  if(/\brugby\b/i.test(msg)) return t[lang].rugby;
  if(/\b(slot|reel|spin|lever|üé∞)\b/i.test(msg)) return t[lang].slots;
  if(/\b(profile|üë§|avatar|followers|following)\b/i.test(msg)) return t[lang].profile;
  if(/\b(setting|theme|contrast|text|‚ò∞|notification)\b/i.test(msg)) return t[lang].settings;
  if(/\b(hi|hello|hey|hola|bonjour|salut|‰Ω†Â•Ω)\b/i.test(msg)) return t[lang].hi;
  return t[lang].help;
}
document.getElementById('sendBtn').onclick=()=>{ const m=chatInput.value.trim(); if(!m) return; addMsg('me',m); chatInput.value=''; const lang=detectLang(m); addMsg('bot', replyFor(lang,m)); };
setTimeout(()=> addMsg('bot', "üëã Welcome! I‚Äôm your Assistant. Ask me anything about the site."), 300);
</script>
</body></html>