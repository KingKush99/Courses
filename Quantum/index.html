
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Quantum Engineering & Coding — Interactive Course</title>
<style>
:root{--bg:#0d0f14;--card:#151a23;--text:#e9eef7;--muted:#a7b2c5;--accent:#6ad1ff;--good:#7be495;--bad:#ff7a7a}
*{box-sizing:border-box}body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;color:var(--text);background:linear-gradient(180deg,#0b0e13,#0f1420 60%,#0b0e13)}
.topbar{display:flex;align-items:center;flex-wrap:wrap;gap:8px;justify-content:space-between;padding:12px 18px;background:#0a0e16;position:sticky;top:0;z-index:10;border-bottom:1px solid #1f2733}
.topbar h1{margin:0;font-size:20px}
nav .nav-btn,#exportProgress,#resetProgress,#importProgressBtn{margin:0 6px;background:var(--card);color:var(--text);border:1px solid #222b38;padding:8px 10px;border-radius:10px;cursor:pointer}
nav .nav-btn:hover,#exportProgress:hover,#resetProgress:hover,#importProgressBtn:hover{border-color:var(--accent)}
main{display:flex;gap:18px;padding:18px}
.sidebar{width:300px;background:var(--card);padding:14px;border:1px solid #1d2531;border-radius:14px;height:fit-content;position:sticky;top:64px}
.content{flex:1;display:grid;gap:16px}
.card{background:var(--card);border:1px solid #1d2531;border-radius:16px;padding:16px}
h2,h3{margin-top:0}p{color:var(--muted)}
.button{background:#121826;color:var(--text);border:1px solid #263145;padding:8px 12px;border-radius:10px;cursor:pointer}
.button:hover{border-color:var(--accent)}
.quiz{border-top:1px dashed #2b374a;margin-top:10px;padding-top:10px}
.quiz .q{margin:10px 0}
.quiz input[type="text"],.quiz input[type="number"],textarea{width:100%;background:#0f1420;border:1px solid #2b374a;color:var(--text);padding:8px;border-radius:10px}
.quiz .option{display:block;margin:6px 0;padding:8px;border:1px solid #293447;border-radius:10px;cursor:pointer}
.quiz .option.selected{border-color:var(--accent);background:#0f1624}
.result{margin-top:8px;font-weight:600}.result.good{color:var(--good)}.result.bad{color:var(--bad)}
.locked{opacity:.5;pointer-events:none}.badge{display:inline-block;padding:2px 8px;border-radius:999px;border:1px solid #2a364a;margin-left:6px;font-size:12px;color:var(--muted)}
hr{border:0;height:1px;background:#233047;margin:14px 0}.footer{opacity:.7}
ul{margin:0 0 0 18px}
.hero{background:linear-gradient(135deg,#0c1322,#0a0f1a);border:1px solid #1d2738;border-radius:18px;padding:18px}
</style>
</head>
<body>
<header class="topbar">
  <h1>Quantum Engineering & Coding</h1>
  <nav>
    <button class="nav-btn" data-view="modules">Course</button>
    <button class="nav-btn" data-view="tasks">Coding Tasks</button>
    <button class="nav-btn" data-view="stories">Stories</button>
    <button class="nav-btn" data-view="cases">Real-World Cases</button>
    <button id="importProgressBtn">Import Progress</button>
    <button id="exportProgress">Export Progress</button>
    <button id="resetProgress">Reset</button>
    <input id="importFile" type="file" accept="application/json" style="display:none"/>
  </nav>
</header>

<main>
  <aside class="sidebar">
    <div class="card hero">
      <h3>Welcome</h3>
      <p>Interactive modules save your progress locally. Export a JSON backup and import it on any device.</p>
    </div>
    <div class="card">
      <h3>Progress</h3>
      <div id="progressList"></div>
    </div>
  </aside>

  <section class="content" id="content">
    <div class="card">
      <h2>Start the Course</h2>
      <p>Work through fundamentals, build circuits, explore real-world cases, and propose your own quantum-enabled solutions.</p>
      <ul>
        <li>Quizzes &amp; number puzzles</li>
        <li>Hands-on Python/Qiskit tasks</li>
        <li>Speculative futures &amp; ethics</li>
        <li>Open-ended challenges with peer-review prompts</li>
      </ul>
    </div>
  </section>
</main>

<footer><small>© 2025 Quantum Learning Lab — MIT License</small></footer>

<script>
// ---------- EMBEDDED COURSE DATA (no fetch) ----------
const EMBEDDED_MODULES = [
  {"id":"m1_fundamentals","title":"Module 1 — Quantum Fundamentals","level":"Beginner","summary":"Superposition, measurement, and entanglement — the conceptual bedrock.","quizCount":4,"unlock":0},
  {"id":"m2_qubits_and_gates","title":"Module 2 — Qubits & Gates","level":"Beginner","summary":"States, Bloch intuition, and core gates (X, Z, H, CNOT).","quizCount":4,"unlock":50,"prereq":"m1_fundamentals"},
  {"id":"m3_coding_qiskit","title":"Module 3 — Coding Quantum (Qiskit)","level":"Intermediate","summary":"Build circuits, simulate, measure; from superposition to Bell states.","quizCount":3,"unlock":50,"prereq":"m2_qubits_and_gates"},
  {"id":"m4_applications","title":"Module 4 — Real-World Applications","level":"Intermediate","summary":"Crypto, sensing, simulation, and optimization with case patterns.","quizCount":3,"unlock":60,"prereq":"m3_coding_qiskit"},
  {"id":"m5_future_ethics","title":"Module 5 — Futures & Ethics","level":"Advanced","summary":"Quantum internet, post-quantum migration, safety and governance.","quizCount":3,"unlock":60,"prereq":"m4_applications"},
  {"id":"m6_final_challenge","title":"Module 6 — Grand Creative Challenge","level":"Capstone","summary":"Propose, defend, and iterate on a quantum-enabled solution to a global problem.","quizCount":2,"unlock":70,"prereq":"m5_future_ethics"}
];

const MODULE_DETAILS = {
  "m1_fundamentals": {
    "id":"m1_fundamentals",
    "title":"Module 1 — Quantum Fundamentals",
    "description":"Explore probabilistic amplitudes, measurement, and non-classical correlations.",
    "unlock":0,
    "sections":[
      {"heading":"Key Ideas","text":"In quantum mechanics, amplitudes are complex numbers; probabilities are their squared magnitudes. Measurement collapses a state.","list":["Superposition: a|0> + b|1>","Entanglement: correlations beyond classical","Measurement: projective outcomes"]},
      {"heading":"Warm-up Quiz","quiz":[
        {"type":"num","prompt":"If α = 1/√2 and β = 1/√2, what is P(|0>)?","answer":0.5,"tol":0.0001,"explain":"P(|0>) = |α|² = (1/√2)² = 1/2."},
        {"type":"num","prompt":"State ψ = √0.8 |0> + √0.2 |1>. What is P(|1>)?","answer":0.2,"tol":0.0001,"explain":"The probability of |1> is 0.2."},
        {"type":"mc","prompt":"Which statement is true about measurement?","options":["It never changes the state.","It probabilistically projects onto an eigenstate.","It always yields |1> if β≠0."],"answer":1,"explain":"Projective measurement collapses the state to an eigenvector."},
        {"type":"mc","prompt":"Pick a unitary matrix.","options":["[[1,0],[0,1]]","[[1,1],[0,1]]","[[2,0],[0,0.5]]"],"answer":0,"explain":"The identity is unitary (U†U=I). The others are not."}
      ]},
      {"heading":"Creative Challenge","text":"Imagine interplanetary disaster response enabled by entangled sensor networks. What capabilities and risks emerge?","challenge":true}
    ]
  },
  "m2_qubits_and_gates": {
    "id":"m2_qubits_and_gates",
    "title":"Module 2 — Qubits & Gates",
    "description":"Practice with single-qubit gates and a first two-qubit entangling operation.",
    "unlock":50,
    "sections":[
      {"heading":"States & Bloch Intuition","text":"The Hadamard (H) maps |0>→(|0>+|1>)/√2 and |1>→(|0>−|1>)/√2, rotating between Z and X bases."},
      {"heading":"Gate Quiz","quiz":[
        {"type":"mc","prompt":"Which gate flips |0>↔|1>?","options":["Z","X","H"],"answer":1,"explain":"X is the quantum NOT."},
        {"type":"mc","prompt":"After H on |0>, which measurement distribution in Z-basis is correct?","options":["P(0)=1, P(1)=0","P(0)=0.5, P(1)=0.5","P(0)=0, P(1)=1"],"answer":1,"explain":"H|0> = (|0>+|1>)/√2."},
        {"type":"num","prompt":"State with amplitudes √3/2 for |0> and 1/2 for |1>. What is P(|1>)?","answer":0.25,"tol":0.0001,"explain":"|1/2|^2 = 1/4."},
        {"type":"mc","prompt":"Select the correct CNOT truth table (control=0, target=1).","options":["00→00, 01→01, 10→11, 11→10","00→01, 01→00, 10→10, 11→11","00→10, 01→11, 10→00, 11→01"],"answer":0,"explain":"Target flips iff control is 1."}
      ]}
    ]
  },
  "m3_coding_qiskit": {
    "id":"m3_coding_qiskit",
    "title":"Module 3 — Coding Quantum (Qiskit)",
    "description":"Write simple circuits, simulate results, and interpret counts.",
    "unlock":50,
    "sections":[
      {"heading":"First Circuit (Superposition)","text":"Use the coding task template to run a 1-qubit circuit with an H gate and measure it 1000 shots."},
      {"heading":"Quiz","quiz":[
        {"type":"mc","prompt":"Which backend simulates measurement outcomes with noise-free sampling?","options":["qasm_simulator","statevector_simulator","unitary_simulator"],"answer":0,"explain":"`qasm_simulator` returns sampled counts."},
        {"type":"num","prompt":"If 0-count=520 and 1-count=480 in 1000 shots, estimate P(|0>).","answer":0.52,"tol":0.01,"explain":"520/1000 = 0.52 (±statistical error)."},
        {"type":"mc","prompt":"Entanglement check: after H on q0 then CNOT(q0→q1) and measuring both, which outcome set is typical?","options":["00 and 11 dominate.","01 and 10 dominate.","All four equal."],"answer":0,"explain":"Bell state produces correlated 00/11."}
      ]},
      {"heading":"Mini-Challenge","text":"Modify the Bell-state circuit to rotate to the Y-basis before measurement. What correlations do you expect?","challenge":true}
    ]
  },
  "m4_applications": {
    "id":"m4_applications",
    "title":"Module 4 — Real-World Applications",
    "description":"Survey production-ready patterns and where quantum offers near-term value.",
    "unlock":60,
    "sections":[
      {"heading":"Now & Next","list":[
        "Quantum Key Distribution for secure links (satellite + terrestrial)",
        "Quantum Sensing for gravimetry, navigation, and medical imaging",
        "Quantum Simulation for materials and drug discovery",
        "Quantum-inspired optimization for logistics today (on classical HW)"
      ]},
      {"heading":"Numbers Quiz","quiz":[
        {"type":"num","prompt":"Speedup: 10,000 years ≈ how many seconds? (use 365.25 days/year)","answer":315576000000,"tol":1000000,"explain":"10,000×365.25×24×3600 ≈ 3.15576×10^11 s."},
        {"type":"num","prompt":"If QC solves it in 200 s, what is the speedup factor vs 10,000 years (in seconds)?","answer":1577880000,"tol":1000000,"explain":"3.15576e11 / 200 ≈ 1.57788e9."},
        {"type":"mc","prompt":"Which is *not* a near-term win?","options":["Perfect factoring of 4096-bit RSA on NISQ devices","Quantum-enhanced sensing for navigation","Post-quantum crypto migration planning"],"answer":0,"explain":"Large-scale factoring requires fault-tolerant QC."}
      ]},
      {"heading":"Design Sprint","text":"Pick a sector (health, energy, finance, climate). Sketch how quantum + classical systems solve a real bottleneck. Identify value, risks, and KPIs.","challenge":true}
    ]
  },
  "m5_future_ethics": {
    "id":"m5_future_ethics",
    "title":"Module 5 — Futures & Ethics",
    "description":"Look ahead to quantum internet, cryptographic transitions, governance, and equitable access.",
    "unlock":60,
    "sections":[
      {"heading":"Scenario Planning","text":"Futures come with tradeoffs: security vs. privacy, capability vs. concentration of power."},
      {"heading":"Quiz & Reflection","quiz":[
        {"type":"mc","prompt":"Post-quantum transition priority?","options":["Wait until quantum breaks RSA widely","Inventory crypto dependencies and migrate early","Do nothing—risk is minimal"],"answer":1,"explain":"Proactive migration avoids cliff-edge failures."},
        {"type":"mc","prompt":"Quantum internet first killer app?","options":["Latency-free FTL file transfer","Device-independent QKD and secure authentication","Unlimited free energy"],"answer":1,"explain":"Security/authentication is plausible earliest utility."},
        {"type":"judge","prompt":"Write a brief policy for responsible quantum model release (access tiers, auditing, misuse response)."}
      ]}
    ]
  },
  "m6_final_challenge": {
    "id":"m6_final_challenge",
    "title":"Module 6 — Grand Creative Challenge",
    "description":"Define a global problem and defend a quantum-enabled solution with metrics and an ethics plan.",
    "unlock":70,
    "sections":[
      {"heading":"Your Mission (2050)","text":"Lead a Quantum Solutions Task Force. Choose a crisis (climate, pandemics, asteroid) and pitch a solution combining quantum and classical tools.","challenge":true},
      {"heading":"Peer Review Prompt","quiz":[{"type":"judge","prompt":"Draft a rubric (5–7 criteria) to evaluate competing proposals fairly."}]}
    ]
  }
};

// ---------- APP (no fetch) ----------
const STORAGE_KEY='qe_progress_complete_nofetch';
const state={modules:EMBEDDED_MODULES, progress:JSON.parse(localStorage.getItem(STORAGE_KEY)||'{}'), view:'modules'};
const $content=document.getElementById('content');
const $progressList=document.getElementById('progressList');
const $importBtn=document.getElementById('importProgressBtn');
const $importFile=document.getElementById('importFile');

// Navigation
document.querySelectorAll('.nav-btn').forEach(btn=>btn.addEventListener('click',()=>setView(btn.dataset.view)));

// Export / Import / Reset
document.getElementById('exportProgress').addEventListener('click',()=>{
  const b=new Blob([JSON.stringify(state.progress,null,2)],{type:'application/json'});
  const u=URL.createObjectURL(b); const a=document.createElement('a');
  a.href=u; a.download='quantum_course_progress.json'; a.click(); URL.revokeObjectURL(u);
});
document.getElementById('resetProgress').addEventListener('click',()=>{
  if(confirm('Reset all saved progress in this browser?')){
    state.progress={}; saveProgress(); renderProgress(); setView(state.view);
  }
});
$importBtn.addEventListener('click',()=> $importFile.click());
$importFile.addEventListener('change',e=>{
  const f=e.target.files[0]; if(!f) return;
  const r=new FileReader();
  r.onload=()=>{
    try{
      const parsed=JSON.parse(r.result);
      if(typeof parsed!=='object' || Array.isArray(parsed)) throw new Error('Invalid file');
      state.progress={...state.progress, ...parsed};
      saveProgress(); renderProgress(); alert('Progress imported!'); setView(state.view);
    }catch(err){ alert('Import failed: '+err.message); }
  };
  r.readAsText(f);
});

function saveProgress(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(state.progress)); }
function percent(n,d){ return d? Math.round((n/d)*100):0; }

function renderProgress(){
  $progressList.innerHTML='';
  state.modules.forEach(m=>{
    const p=state.progress[m.id] || {correct:0,total:m.quizCount||0};
    const row=document.createElement('div'); row.className='card';
    const prereq = m.prereq ? ` (needs ${m.unlock}% on ${lookupModule(m.prereq).title})` : ' (unlocked)';
    row.innerHTML=`<strong>${m.title}</strong> <span class="badge">${percent(p.correct,p.total)}%</span>
      <div style="margin-top:6px; font-size:12px; color:#a7b2c5">Unlock: ${m.unlock}%${m.prereq? ' of prior module' : ''}${m.prereq? '' : ''}</div>`;
    $progressList.appendChild(row);
  });
}

function lookupModule(id){ return state.modules.find(x=>x.id===id) || {title:id}; }

function meetsUnlock(m){
  // Free if unlock==0 or no prereq
  if(!m.prereq || m.unlock===0) return true;
  const p = state.progress[m.prereq] || {correct:0,total:0};
  return percent(p.correct, p.total) >= m.unlock;
}

function setView(view){
  state.view=view;
  if(view==='modules') renderModuleList();
  if(view==='tasks') renderTasks();
  if(view==='stories') renderStories();
  if(view==='cases') renderCases();
}

function renderModuleList(){
  $content.innerHTML='';
  state.modules.forEach(m=>{
    const card=document.createElement('div');
    const locked=!meetsUnlock(m);
    card.className='card' + (locked? ' locked':'');
    const p=state.progress[m.id] || {correct:0,total:m.quizCount||0};
    const prereqText = m.prereq ? `Requires ${m.unlock}% on ${lookupModule(m.prereq).title}.` : 'Unlocked.';
    card.innerHTML=`
      <h2>${m.title} <span class="badge">${m.level||''}</span></h2>
      <p>${m.summary}</p>
      <p class="footer">Quizzes: ${m.quizCount} • ${prereqText}</p>
      <button class="button" ${locked?'disabled':''}>Open Module (${percent(p.correct,p.total)}%)</button>
    `;
    card.querySelector('button').addEventListener('click', ()=> openModule(m.id));
    $content.appendChild(card);
  });
}

function openModule(id){
  const mod = MODULE_DETAILS[id];
  renderModule(mod);
}

function updateModuleProgress(mod, correctDelta, totalDelta){
  const p=state.progress[mod.id] || {correct:0,total:0};
  p.correct += correctDelta; p.total += totalDelta;
  state.progress[mod.id]=p; saveProgress(); renderProgress();
}

function renderModule(mod){
  $content.innerHTML='';
  const card=document.createElement('div'); card.className='card';
  card.innerHTML=`<h2>${mod.title}</h2><p>${mod.description}</p><hr/>`; $content.appendChild(card);

  mod.sections.forEach((sec, idx)=>{
    const s=document.createElement('div'); s.className='card';
    s.innerHTML = `<h3>${sec.heading}</h3>` + (sec.text? `<p>${sec.text}</p>` : '');
    if(sec.list){
      const ul=document.createElement('ul');
      sec.list.forEach(item=>{ const li=document.createElement('li'); li.textContent=item; ul.appendChild(li); });
      s.appendChild(ul);
    }
    if(sec.quiz){
      const qwrap=document.createElement('div'); qwrap.className='quiz';
      sec.quiz.forEach((q,i)=> qwrap.appendChild(renderQuiz(mod, q, `${mod.id}_${idx}_${i}`)));
      s.appendChild(qwrap);
    }
    if(sec.challenge){
      const ta=document.createElement('textarea');
      ta.placeholder='Sketch your idea/solution here...';
      ta.value=(state.progress[mod.id]?.['challenge_'+idx]) || '';
      ta.addEventListener('input', ()=>{
        const p=state.progress[mod.id] || {};
        p['challenge_'+idx]=ta.value;
        state.progress[mod.id]=p; saveProgress();
      });
      s.appendChild(ta);
    }
    $content.appendChild(s);
  });

  const back=document.createElement('div'); back.className='card';
  back.innerHTML=`<button class="button">← Back to modules</button>`;
  back.querySelector('button').addEventListener('click', renderModuleList);
  $content.appendChild(back);
}

function renderQuiz(mod, q, key){
  const block=document.createElement('div'); block.className='q';
  const result=document.createElement('div'); result.className='result';
  if(q.type==='mc'){
    block.innerHTML = `<div><strong>${q.prompt}</strong></div>`;
    q.options.forEach((opt, idx)=>{
      const div=document.createElement('div'); div.className='option'; div.textContent=opt;
      div.addEventListener('click', ()=>{
        Array.from(block.querySelectorAll('.option')).forEach(el=>el.classList.remove('selected'));
        div.classList.add('selected');
        const correct = idx===q.answer;
        result.textContent = correct? 'Correct! '+(q.explain||'') : 'Not quite. '+(q.explain||'');
        result.className = 'result ' + (correct?'good':'bad');
        updateModuleProgress(mod, 1, 1);
        div.parentElement.querySelectorAll('.option').forEach(o=>o.classList.add('locked'));
      });
      block.appendChild(div);
    });
  } else if(q.type==='num'){
    block.innerHTML = `<div><strong>${q.prompt}</strong></div>`;
    const inp=document.createElement('input'); inp.type='number'; inp.step='any';
    const btn=document.createElement('button'); btn.className='button'; btn.textContent='Check';
    btn.addEventListener('click', ()=>{
      const val=parseFloat(inp.value); if(isNaN(val)){ alert('Enter a number'); return; }
      const correct = Math.abs(val - q.answer) <= (q.tol||0);
      result.textContent = (correct? 'Correct! ' : 'Close! ') + (q.explain||'');
      result.className = 'result ' + (correct?'good':'bad');
      updateModuleProgress(mod, 1, 1);
      btn.disabled=true; inp.disabled=true;
    });
    block.appendChild(inp); block.appendChild(btn);
  } else if(q.type==='judge'){
    block.innerHTML = `<div><strong>${q.prompt}</strong></div>`;
    const ta=document.createElement('textarea'); ta.placeholder='Write your reasoning...';
    const btn=document.createElement('button'); btn.className='button'; btn.textContent='Mark as Completed';
    btn.addEventListener('click', ()=>{
      result.textContent='Saved. Great thinking!'; result.className='result good';
      updateModuleProgress(mod, 1, 1);
      btn.disabled=true; ta.disabled=true;
    });
    block.appendChild(ta); block.appendChild(btn);
  }
  block.appendChild(result);
  return block;
}

// Other views
function renderTasks(){
  $content.innerHTML='';
  const card=document.createElement('div'); card.className='card';
  card.innerHTML = `<h2>Python/Qiskit Coding Tasks</h2>
  <p>Clone/download this repo locally. Install Python 3.10+ and run:</p>
  <pre>python -m venv .venv
source .venv/bin/activate   (Windows: .venv\\Scripts\\activate)
pip install -r tasks/requirements.txt</pre>
  <p>Then run files inside <code>tasks/</code>. Each file prints guidance and has TODOs.</p>`;
  $content.appendChild(card);
  const list=document.createElement('div'); list.className='card';
  list.innerHTML = `<ul>
    <li><code>tasks/superposition.py</code> — Build and measure a single-qubit superposition.</li>
    <li><code>tasks/entangle.py</code> — Create a Bell state and analyze counts.</li>
    <li><code>tasks/bernstein_vazirani.py</code> — Implement the BV algorithm (bonus).</li>
    <li><code>tasks/quantum_randomness.py</code> — Make a simple QRNG and test bias.</li>
  </ul>`;
  $content.appendChild(list);
}
function renderStories(){ $content.innerHTML=''; const c=document.createElement('div'); c.className='card'; c.innerHTML='<h2>Speculative Futures & Lessons</h2><p>Open <code>stories/shorts.md</code> in the repository to read and extend.</p>'; $content.appendChild(c); }
function renderCases(){ $content.innerHTML=''; const c=document.createElement('div'); c.className='card'; c.innerHTML='<h2>Case Studies</h2><ul><li>Quantum Key Distribution in Satellites</li><li>Quantum Sensing in Healthcare</li><li>Optimization in Logistics with Quantum-Inspired Methods</li></ul><p>See <code>real_world_cases/</code> for full write-ups.</p>'; $content.appendChild(c); }

// Init
renderProgress();
setView('modules');
</script>
</body>
</html>
