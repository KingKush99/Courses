<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Profile</title>
<link rel="preconnect" href="https://cdn.jsdelivr.net"/>
<script src="https://cdn.jsdelivr.net/npm/tesseract.js@4/dist/tesseract.min.js"></script>
<style>
  :root{ --fg:#fff; --bg1:#0b0b0f; --bg2:#1b0b00; --bg3:#3a0c00; --panel:#1a0f0a; --brand:#ff6b00; --muted:#ffd9b3; --pill:linear-gradient(90deg,#ff6b00,#ff3b3b); }
  *{box-sizing:border-box} html,body{height:100%}
  body{margin:0; font-family:"Comic Sans MS","Comic Sans",cursive; color:var(--fg); overflow-x:hidden;
       background: radial-gradient(1200px 700px at 50% 110%, #ff9f1a40, transparent 60%), linear-gradient(120deg, var(--bg1), var(--bg2) 40%, var(--bg3));}
  a{color:#ffd166}
  .wrap{min-height:100vh; display:flex; align-items:center; justify-content:center; padding:8vh 24px; text-align:center;}
  h1{font-size:clamp(2rem,4vw+1rem,3rem); text-shadow:0 2px 18px #000; margin:0 0 8px;}
  .sub{opacity:.9; margin:0 0 18px;}

  /* round fixed buttons */
  .round-btn{position:fixed; width:56px; height:56px; border-radius:50%; display:grid; place-items:center; color:#fff; cursor:pointer;
             background: radial-gradient(circle at 30% 30%, #ff9f1a, #ff6b00 60%, #3a0c00 100%); box-shadow: 0 8px 20px #000a; z-index:100;}
  .profile-btn{left:16px; top:16px;} .slots-btn{right:16px; bottom:16px;} .chat-btn{left:16px; bottom:16px;} .menu-btn{right:16px; top:16px;}
  .burger{position:relative; width:26px; height:18px;}
  .burger span{position:absolute; left:0; width:100%; height:3px; background:#fff; border-radius:2px; transition:transform .25s ease, opacity .2s ease, top .25s ease;}
  .burger span:nth-child(1){top:0} .burger span:nth-child(2){top:7.5px} .burger span:nth-child(3){top:15px}
  .menu-btn.open .burger span:nth-child(1){top:7.5px; transform:rotate(45deg)} .menu-btn.open .burger span:nth-child(2){opacity:0} .menu-btn.open .burger span:nth-child(3){top:7.5px; transform:rotate(-45deg)}

  /* popovers */
  .popover{position:absolute; width:560px; max-width:95vw; background:var(--panel); border:1px solid #ffffff1f; border-radius:14px; padding:14px; box-shadow:0 12px 24px #000a; display:none; z-index:2000; color:#ffd9b3; overflow:hidden;}
  .row{display:flex; align-items:center; gap:10px; margin:8px 0; flex-wrap:wrap;}
  .btn{padding:12px 18px; border-radius:999px; border:none; font-weight:800; background:linear-gradient(90deg,#ff6b00,#ff3b3b); color:#fff; cursor:pointer; box-shadow:0 8px 18px #0008; font-family:inherit;}
  select, input[type="range"], input[type="text"], input[type="number"]{background:#2a1b12; color:#fff; border:1px solid #fff2; border-radius:8px; padding:6px 8px; font-family:inherit;}
  .back-fab{position:fixed; left:16px; top:86px; z-index:120; background:#2a1b12; border:1px solid #ffffff1a; color:#fff; padding:8px 12px; border-radius:999px; text-decoration:none;}

  /* pill buttons like screenshot but orange-red */
  .pill-btn{display:block; text-decoration:none; color:#fff; font-weight:800; letter-spacing:.3px; text-align:center;
            background:linear-gradient(90deg,#ff6b00,#ff3b3b); border-radius:999px; padding:16px 24px; box-shadow:0 8px 18px #0008; transition:transform .12s ease, box-shadow .12s ease, filter .12s ease; position:relative; width:100%;}
  .pill-btn:hover{transform: translateY(-1px); box-shadow:0 12px 24px #000a; filter:brightness(1.03);}
  .grid{display:grid; gap:16px; width:min(1400px,95vw); margin:16px auto;}
  #colSelWrap{margin-top:10px; display:flex; justify-content:center; gap:10px; color:#ffd9b3;}

  /* tooltips for course descriptions */
  .tip{position:fixed; pointer-events:none; padding:10px 12px; border-radius:10px; background:#120b07ee; border:1px solid #ff6b0040; color:#ffd9b3; opacity:0; transform:translateY(-6px); transition:opacity .12s ease, transform .12s ease; z-index:9000;}
</style>
</head>
<body>
<a class="round-btn profile-btn" href="#" id="profileLink" title="Profile" aria-label="Profile">üë§</a>
<button class="round-btn menu-btn" id="menuBtn" title="Menu" aria-label="Menu"><div class="burger" aria-hidden="true"><span></span><span></span><span></span></div></button>
<button class="round-btn slots-btn" id="slotsBtn" title="Mini Slots" aria-label="Mini Slots">üé∞</button>
<button class="round-btn chat-btn" id="chatBtn" title="Assistant" aria-label="Assistant">üí¨</button>
<a class="back-fab" href="#" id="backBtn">‚Üê Back</a>

<style>
.card{background:var(--panel); border:1px solid #ffffff1a; border-radius:16px; padding:16px; margin:12px auto; max-width:1100px; text-align:left;}
.grid-avatars{display:grid; grid-template-columns: repeat(auto-fill, minmax(66px,1fr)); gap:10px;}
.avatar{width:66px; height:66px; border-radius:50%; display:grid; place-items:center; font-size:34px; cursor:pointer; border:2px solid transparent; background:#20130d;}
.avatar.selected{border-color:#ff9f1a;}
.badge{background:#2a1b12;border:1px solid #ffffff1a;color:#fff;padding:6px 10px;border-radius:999px;margin-right:8px;cursor:pointer}
.list{display:none; background:#130c08; border:1px solid #ffffff12; border-radius:12px; padding:10px; margin-top:8px; max-height:160px; overflow:auto;}
.modal{position:fixed;inset:0;background:#0008;display:none;align-items:center;justify-content:center;z-index:3000}
.modal .panel{background:var(--panel);border:1px solid #ffffff1a;border-radius:16px;padding:16px;max-width:560px;width:92%}
</style>
<main class="wrap"><div style="width:100%">
  <h1>Profile</h1>
  <div class="card">
    <div class="row" style="justify-content:space-between">
      <div class="row" style="gap:14px">
        <div id="avatarDisplay" class="avatar" title="Your avatar">üê∂</div>
        <div>
          <div style="font-weight:800">Username</div>
          <input id="username" type="text" value="Player" style="margin-top:6px">
        </div>
      </div>
      <button class="btn" id="openSettings">‚öôÔ∏è Settings</button>
    </div>
    <div class="row" style="margin-top:10px">
      <span class="badge" data-target="followersList">Followers: <span id="followersCount">0</span></span>
      <span class="badge" data-target="followingList">Following: <span id="followingCount">0</span></span>
      <span class="badge" data-target="friendsList">Friends: <span id="friendsCount">0</span></span>
    </div>
    <div id="followersList" class="list"></div>
    <div id="followingList" class="list"></div>
    <div id="friendsList" class="list"></div>
  </div>

  <div class="card">
    <h3>Choose an Avatar</h3>
    <div class="grid-avatars" id="avatarGrid"></div>
  </div>

  <div class="card">
    <h3>Course Progress</h3>
    <div id="courses"></div>
  </div>
</div></main>

<div class="modal" id="settingsModal">
  <div class="panel">
    <h3>Settings</h3>
    <div class="row"><label><input type="checkbox" id="showFollowers" checked> Show Followers list</label></div>
    <div class="row"><label><input type="checkbox" id="showFollowing" checked> Show Following list</label></div>
    <div class="row"><label><input type="checkbox" id="showFriends" checked> Show Friends list</label></div>
    <div class="row"><label><input type="checkbox" id="notifOn" checked> Notifications On</label></div>
    <div class="row" style="justify-content:flex-end"><button class="btn" id="closeSettings">Close</button></div>
  </div>
</div>

<script>
  const animals=["üê∂","üê±","ü¶ä","üêª","üêº","üê®","üêØ","ü¶Å","üêÆ","üê∑","üê∏","üêµ","üêî","ü¶Ñ","üêô","ü¶â","üê¢","üêç","ü¶ï","ü¶ñ",
                 "ü¶ì","ü¶í","üêù","ü¶ã","üêû","üêå","üêü","üê†","üê¨","ü¶≠","üê≥","üêä","ü¶¶","ü¶î","ü¶´","ü¶ú","ü¶©","ü¶ö","ü¶¢","ü¶§",
                 "üêï","üê©","üêà","üêé","ü¶Æ","üêï‚Äçü¶∫","üêøÔ∏è","ü¶ù","ü¶•","ü¶ò"];
  const avatarGrid=document.getElementById('avatarGrid'); const avatarDisplay=document.getElementById('avatarDisplay');
  function loadAvatar(){ const a=localStorage.getItem('avatar')||animals[0]; avatarDisplay.textContent=a; }
  function renderAvatars(){ avatarGrid.innerHTML=''; const sel=localStorage.getItem('avatar')||animals[0]; animals.forEach(a=>{ const d=document.createElement('div'); d.className='avatar'+(a===sel?' selected':''); d.textContent=a; d.onclick=()=>{ localStorage.setItem('avatar',a); loadAvatar(); renderAvatars(); }; avatarGrid.appendChild(d); }); }

  function get(key,def){ try{ return JSON.parse(localStorage.getItem(key)||JSON.stringify(def)); }catch(_){ return def; } }
  function set(key,val){ localStorage.setItem(key, JSON.stringify(val)); }
  function renderLists(){ const followers=get('followers',["Alex","Sam","Kai"]), following=get('following',["Dev","Coach"]), friends=get('friends',["Alex","Dev"]); 
    const make=(id,arr)=>{ const el=document.getElementById(id); el.innerHTML=''; arr.forEach(n=>{ const li=document.createElement('div'); li.textContent=n; el.appendChild(li);}); document.getElementById(id.replace('List','Count')).textContent=arr.length; };
    make('followersList',followers); make('followingList',following); make('friendsList',friends);
  }
  document.querySelectorAll('.badge').forEach(b=> b.onclick=()=>{ const id=b.getAttribute('data-target'); const el=document.getElementById(id); el.style.display= el.style.display==='block'?'none':'block'; });

  // Settings modal
  const settings=document.getElementById('settingsModal'); document.getElementById('openSettings').onclick=()=>{ settings.style.display='flex'; };
  document.getElementById('closeSettings').onclick=()=>{ settings.style.display='none'; };
  const showFollowers=$('showFollowers'), showFollowing=$('showFollowing'), showFriends=$('showFriends');
  [showFollowers,showFollowing,showFriends].forEach(cb=> cb.onchange=()=>{ const map={{'showFollowers':'followersList','showFollowing':'followingList','showFriends':'friendsList'}}; document.getElementById(map[cb.id]).style.display = cb.checked?'block':'none'; });

  // Username
  const uname=document.getElementById('username'); uname.value = localStorage.getItem('username') || 'Player'; uname.oninput=()=> localStorage.setItem('username', uname.value);

  // Progress bars
  const courses=['Chess','Coding Evolution','Music Maker','Offensive Coordinator','Quantum','Rugby1','Poker','Books'];
  const keyFor=n=>'progress_'+n.toLowerCase().replace(/[^a-z0-9]+/g,'-'); 
  const wrap=document.getElementById('courses');
  function renderProgress(){ wrap.innerHTML=''; courses.forEach(n=>{ const v=parseInt(localStorage.getItem(keyFor(n))||'0',10); const col=v>=100?'#1cc862':(v<=25?'#ff3b30':'#ffd166'); const d=document.createElement('div'); d.style.margin='12px 0'; d.innerHTML='<div class="row"><strong>'+n+'</strong><span style="margin-left:auto">'+v+'%</span></div><div style="height:12px;background:#2a1b12;border-radius:999px;overflow:hidden;border:1px solid #ffffff1a"><div style="height:100%;width:'+v+'%;background:'+col+'"></div></div>'; wrap.appendChild(d); }); }
  loadAvatar(); renderAvatars(); renderLists(); renderProgress();
</script>

<!-- Mini Slots -->
<div class="popover" id="slotsPopover" role="dialog" aria-label="Mini Slots">
  <h3>Mini Slots</h3>
  <div class="row" style="justify-content:space-between">
    <div class="row"><strong>Reels</strong><select id="reelSelect"><option>3</option><option>4</option><option>5</option><option selected>6</option></select></div>
    <div class="row"><strong>Bet</strong><select id="betSelect"><option>10</option><option selected>25</option><option>50</option><option>100</option></select></div>
  </div>
  <div class="row" style="justify-content:center;margin-top:10px"><button class="btn" id="spinBtn">Spin</button></div>
</div>

<!-- Hamburger Menu -->
<div class="popover" id="menuPanel" role="dialog" aria-label="Menu">
  <h3>Menu</h3>
  <div class="row"><strong>Music</strong> <label style="margin-left:auto">On/Off <input type="checkbox" id="musicToggle"></label></div>
  <div class="row"><label>Volume</label><select id="musicVol"><option value="0.2">Low</option><option value="0.6" selected>Medium</option><option value="1">High</option><option value="0">Mute</option></select>
    <label>Track</label><select id="musicTrack"><option value="default">Default</option><option value="arcade">Arcade</option><option value="chill">Chill</option></select></div>
  <hr style="border-color:#ffffff18">
  <div class="row"><strong>Display</strong></div>
  <div class="row"><label>Theme</label><select id="themeSel"><option>Dark</option><option>Light</option><option>High Contrast</option></select>
    <label>Text Size</label><select id="textSel"><option>Default</option><option>Small</option><option>Large</option></select></div>
  <hr style="border-color:#ffffff18">
  <div class="row"><strong>Notifications</strong></div>
  <div class="row"><label>Sound Alerts</label><input type="checkbox" id="notifSound"><label>Pop-ups</label><input type="checkbox" id="notifPopup" checked>
    <label>Frequency</label><select id="notifFreq"><option>All</option><option>Major Only</option></select></div>
</div>

<!-- Chat -->
<div class="popover" id="chatPopover"><h3 id="chatTitle">Assistant</h3>
  <div id="chatLog" style="height:260px;overflow:auto;background:#120b07;border:1px solid #ffffff1a;border-radius:10px;padding:10px"></div>
  <div class="row" style="margin-top:8px">
    <input type="text" id="chatInput" placeholder="Ask me anything about the site‚Ä¶" style="flex:1;background:#2a1b12;border:1px solid #ffffff1a;border-radius:10px;padding:10px">
    <label class="btn" style="padding:10px 12px;">
      üì∑ <input type="file" id="imgInput" accept="image/*" style="display:none">
    </label>
    <button class="btn" id="sendBtn">Send</button>
  </div>
  <small id="chatTip" style="opacity:.8">Understands: English, Espa√±ol, Fran√ßais, ‰∏≠Êñá, ÿßŸÑÿπÿ±ÿ®Ÿäÿ©, ‡§π‡§ø‡§®‡•ç‡§¶‡•Ä, Portugu√™s, Deutsch, Êó•Êú¨Ë™û, –†—É—Å—Å–∫–∏–π.</small>
</div>

<script>
const $=id=>document.getElementById(id);
function base(){ const segs=location.pathname.split('/').filter(Boolean); return location.origin+(segs.length?('/'+segs[0]):''); }
$('backBtn').onclick=(e)=>{e.preventDefault(); try{history.length>1?history.back():location.assign(base()+'/');}catch(_){location.assign(base()+'/');}};
$('profileLink').onclick=(e)=>{e.preventDefault(); fetch(base()+'/profile.html',{method:'HEAD'}).then(r=>{location.href=r.ok?base()+'/profile.html':base()+'/profile/'}).catch(()=>location.href=base()+'/profile/')};

function openPanelAt(btn, panel, pos="below"){ const r=btn.getBoundingClientRect(); panel.style.display="block"; requestAnimationFrame(()=>{ const top=pos==="below"?(r.bottom+6):(r.top-panel.offsetHeight-6); let left=r.right-panel.offsetWidth; if(left<10) left=10; panel.style.top=top+"px"; panel.style.left=left+"px"; panel.classList.add('open'); }); }
function closePanels(){ document.querySelectorAll('.popover').forEach(p=>{p.classList.remove('open'); p.style.display='none';}); document.querySelector('.menu-btn').classList.remove('open'); }
window.addEventListener('click', e=>{ if(!e.target.closest('.popover') && !e.target.closest('.round-btn')) closePanels(); });

const menuBtn=$('menuBtn'), menuPanel=$('menuPanel'); menuBtn.onclick=()=>{ const open=menuPanel.style.display==='block'; if(open){closePanels();} else{ closePanels(); openPanelAt(menuBtn,menuPanel,"below"); menuBtn.classList.add('open'); } };
const slotsPopover=$('slotsPopover'); $('slotsBtn').onclick=()=>{ closePanels(); openPanelAt(slotsBtn, slotsPopover, "above"); };
const chatPopover=$('chatPopover'); $('chatBtn').onclick=()=>{ closePanels(); openPanelAt(chatBtn, chatPopover, "above"); };

/* Chatbot: 10 languages + image OCR */
const chatLog=$('chatLog'), chatInput=$('chatInput'), chatTitle=$('chatTitle');
function addMsg(who, text){ const bubble=document.createElement('div'); bubble.style.display='flex'; bubble.style.justifyContent= who==='me' ? 'flex-end' : 'flex-start'; const inner=document.createElement('div'); inner.style.padding='8px 10px'; inner.style.borderRadius='12px'; inner.style.margin='6px 0'; inner.style.maxWidth='92%'; inner.style.background= who==='me' ? '#2a1b12' : '#1f140d'; inner.textContent=text; bubble.appendChild(inner); chatLog.appendChild(bubble); chatLog.scrollTop=chatLog.scrollHeight; }
function addImagePreview(file){ const url=URL.createObjectURL(file); const img=document.createElement('img'); img.src=url; img.style.maxWidth='50%'; img.style.border='1px solid #ffffff1a'; img.style.borderRadius='10px'; const wrap=document.createElement('div'); wrap.style.display='flex'; wrap.style.justifyContent='flex-end'; wrap.style.margin='6px 0'; wrap.appendChild(img); chatLog.appendChild(wrap); chatLog.scrollTop=chatLog.scrollHeight; }

function detectLang(s){
  if(/[\\u0600-\\u06FF]/.test(s)) return 'ar';              // Arabic
  if(/[\\u0900-\\u097F]/.test(s)) return 'hi';              // Hindi
  if(/[\\u3040-\\u30ff\\u4e00-\\u9faf]/.test(s) && /[\\u3040-\\u30ff]/.test(s)) return 'ja';  // Japanese (Kana present)
  if(/[\\u4e00-\\u9fff]/.test(s)) return 'zh';              // Chinese
  if(/[√°√©√≠√≥√∫√±¬ø¬°]/i.test(s) || /(hola|curso|ajustes|perfil)/i.test(s)) return 'es';
  if(/[√©√®√™√†√ß√π√¥√Æ]/i.test(s) || /(bonjour|profil|r√©glages)/i.test(s)) return 'fr';
  if(/[√§√∂√º√ü]/i.test(s) || /(hallo|profil|einstellung)/i.test(s)) return 'de';
  if(/(ol√°|curso|configura√ß√µes|perfil)/i.test(s)) return 'pt';
  if(/(–ø—Ä–∏–≤–µ—Ç|–ø—Ä–æ—Ñ–∏–ª—å|–Ω–∞—Å—Ç—Ä–æ–π–∫)/i.test(s)) return 'ru';
  return 'en';
}
const replies={
  en:{hi:"Hey! I‚Äôm your Assistant. Ask me about courses, rugby plays, chess openings, or settings.",help:"I can help with: navigating courses, explaining rugby plays (from your PDFs), and basic OCR on screenshots.",slots:"Open üé∞ for Mini Slots to earn coins.",profile:"Tap üë§ for profile and settings.",image:"I‚Äôm reading your screenshot‚Ä¶"},
  es:{hi:"¬°Hola! Soy tu asistente.",help:"Puedo ayudarte con cursos, jugadas de rugby y leer texto de capturas.",slots:"Abre üé∞ para ganar monedas.",profile:"Pulsa üë§ para tu perfil.",image:"Estoy leyendo tu captura‚Ä¶"},
  fr:{hi:"Salut ! Je suis votre assistant.",help:"Je peux aider avec les cours, les sch√©mas de rugby et l‚ÄôOCR de captures.",slots:"Ouvrez üé∞ pour gagner des pi√®ces.",profile:"Appuyez sur üë§ pour le profil.",image:"Je lis votre capture‚Ä¶"},
  zh:{hi:"‰Ω†Â•ΩÔºÅÊàëÊòØ‰Ω†ÁöÑÂä©ÁêÜ„ÄÇ",help:"ÊàëÂèØ‰ª•Â∏ÆÂä©ËØæÁ®ã„ÄÅÊ©ÑÊ¶ÑÁêÉÊàòÊúØÔºåÂπ∂ÂØπÊà™ÂõæÂÅöOCRËØÜÂà´„ÄÇ",slots:"ÁÇπÂáª üé∞ ËµöÂèñÈáëÂ∏Å„ÄÇ",profile:"ÁÇπÂáª üë§ ÊâìÂºÄ‰∏™‰∫∫ËµÑÊñô„ÄÇ",image:"Ê≠£Âú®ËØÜÂà´‰Ω†ÁöÑÊà™Âõæ‚Ä¶"},
  ar:{hi:"ŸÖÿ±ÿ≠ÿ®Ÿãÿß! ÿ£ŸÜÿß ŸÖÿ≥ÿßÿπÿØŸÉ.",help:"ÿ£ÿ≥ÿ™ÿ∑Ÿäÿπ ÿßŸÑŸÖÿ≥ÿßÿπÿØÿ© ŸÅŸä ÿßŸÑÿØŸàÿ±ÿßÿ™ ŸàÿÆÿ∑ÿ∑ ÿßŸÑÿ±ÿ¨ÿ®Ÿä ŸàŸÇÿ±ÿßÿ°ÿ© ÿßŸÑÿµŸàÿ± (OCR).",slots:"ÿßŸÅÿ™ÿ≠ üé∞ ŸÑŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿπŸÖŸÑÿßÿ™.",profile:"ÿßÿ∂ÿ∫ÿ∑ üë§ ŸÑŸÑŸÖŸÑŸÅ ÿßŸÑÿ¥ÿÆÿµŸä.",image:"ÿ£ÿ≠ŸÑŸëŸÑ ŸÑŸÇÿ∑ÿ© ÿßŸÑÿ¥ÿßÿ¥ÿ©‚Ä¶"},
  hi:{hi:"‡§®‡§Æ‡§∏‡•ç‡§§‡•á! ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§∏‡§π‡§æ‡§Ø‡§ï ‡§π‡•Ç‡§Å‡•§",help:"‡§Æ‡•à‡§Ç ‡§ï‡•ã‡§∞‡•ç‡§∏, ‡§∞‡§ó‡•ç‡§¨‡•Ä ‡§™‡•ç‡§≤‡§æ‡§® ‡§î‡§∞ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§®‡§∂‡•â‡§ü OCR ‡§Æ‡•á‡§Ç ‡§Æ‡§¶‡§¶ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•Ç‡§Å‡•§",slots:"‡§∏‡§ø‡§ï‡•ç‡§ï‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è üé∞ ‡§ñ‡•ã‡§≤‡•á‡§Ç‡•§",profile:"üë§ ‡§™‡•ç‡§∞‡•ã‡§´‡§º‡§æ‡§á‡§≤ ‡§¶‡•á‡§ñ‡•á‡§Ç‡•§",image:"‡§Ü‡§™‡§ï‡•Ä ‡§õ‡§µ‡§ø ‡§™‡§¢‡§º ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å‚Ä¶"},
  pt:{hi:"Ol√°! Sou seu assistente.",help:"Ajudo com cursos, jogadas de r√∫gbi e OCR de imagens.",slots:"Abra üé∞ para moedas.",profile:"Toque üë§ para o perfil.",image:"Lendo sua imagem‚Ä¶"},
  de:{hi:"Hi! Ich bin dein Assistent.",help:"Ich helfe bei Kursen, Rugby-Spielz√ºgen und Screenshot-OCR.",slots:"√ñffne üé∞ f√ºr M√ºnzen.",profile:"Tippe üë§ f√ºr dein Profil.",image:"Ich lese deinen Screenshot‚Ä¶"},
  ja:{hi:"„Åì„Çì„Å´„Å°„ÅØÔºÅ„Ç¢„Ç∑„Çπ„Çø„É≥„Éà„Åß„Åô„ÄÇ",help:"„Ç≥„Éº„Çπ„ÇÑ„É©„Ç∞„Éì„Éº„ÅÆ„Éó„É¨„Éº„ÄÅÁîªÂÉè„ÅÆOCR„ÇíÊâã‰ºù„Åà„Åæ„Åô„ÄÇ",slots:"„Ç≥„Ç§„É≥„ÅÆ„Åü„ÇÅüé∞„ÇíÈñã„ÅÑ„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ",profile:"üë§„Åß„Éó„É≠„Éï„Ç£„Éº„É´„Å∏„ÄÇ",image:"„Çπ„ÇØ„É™„Éº„É≥„Ç∑„Éß„ÉÉ„Éà„ÇíËß£Êûê‰∏≠‚Ä¶"},
  ru:{hi:"–ü—Ä–∏–≤–µ—Ç! –Ø –≤–∞—à –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç.",help:"–ü–æ–º–æ–≥–∞—é —Å –∫—É—Ä—Å–∞–º–∏, —Ä–µ–≥–±–∏ –∏ OCR —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤.",slots:"–û—Ç–∫—Ä–æ–π—Ç–µ üé∞, —á—Ç–æ–±—ã –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å –º–æ–Ω–µ—Ç—ã.",profile:"–ù–∞–∂–º–∏—Ç–µ üë§ –¥–ª—è –ø—Ä–æ—Ñ–∏–ª—è.",image:"–ß–∏—Ç–∞—é –≤–∞—à —Å–∫—Ä–∏–Ω—à–æ—Ç‚Ä¶"}
};
function respond(msg){
  const lang=detectLang(msg);
  let r=replies[lang].help;
  if(/\\b(slot|reel|spin|lever|üé∞)\\b/i.test(msg)) r=replies[lang].slots;
  else if(/\\b(profile|üë§|avatar|followers|following|friends)\\b/i.test(msg)) r=replies[lang].profile;
  else if(/\\b(hi|hello|hey|hola|bonjour|salut|‰Ω†Â•Ω|ŸÖÿ±ÿ≠ÿ®ÿß|‡§®‡§Æ‡§∏‡•ç‡§§‡•á|ol√°|hallo|„Åì„Çì„Å´„Å°„ÅØ|–ø—Ä–∏–≤–µ—Ç)\\b/i.test(msg)) r=replies[lang].hi;
  return r;
}
function send(){ const m=chatInput.value.trim(); if(!m) return; addMsg('me', m); chatInput.value=''; addMsg('bot', respond(m)); }
document.getElementById('sendBtn').onclick=send;
chatInput.addEventListener('keydown', e=>{ if(e.key==='Enter') send(); });
setTimeout(()=> addMsg('bot', "üëã Welcome! I can answer in 10 languages and read text from screenshots. Ask me anything."), 400);

/* Image input with OCR + color gist */
$('imgInput').addEventListener('change', async (e)=>{
  const f=e.target.files[0]; if(!f) return;
  addImagePreview(f);
  addMsg('bot', replies[detectLang('')].image);
  try{
    const { createWorker } = Tesseract;
    const worker = await Tesseract.createWorker();
    await worker.loadLanguage('eng');
    await worker.initialize('eng');
    const { data: { text } } = await worker.recognize(f);
    await worker.terminate();
    const clean=text.trim().replace(/\\s+/g,' ');
    if(clean){
      addMsg('bot', "OCR: "+clean.slice(0,400));
    } else {
      addMsg('bot', "I couldn't find readable text. (Tip: upload a sharper screenshot.)");
    }
  }catch(err){
    addMsg('bot', "OCR error (still fine to proceed): "+(err.message||err));
  }
});
</script>
</body></html>