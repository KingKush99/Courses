<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Rugby — Fill in the Blanks</title>
  <link rel="stylesheet" href="../assets/base.css">
  <script defer src="../assets/app.js"></script>
</head>
<body>
<main class="wrap">
  <section class="card">
    <h2>Fill in the Blanks</h2>
    <div id="q"></div>
    <div class="hud"><input id="ans" class="pill-btn" placeholder="Type answer…"><button id="chk" class="pill-btn sm">Check</button><span class="badge" id="msg"></span><a class="pill-btn sm" id="hint">? Hint</a><a class="pill-btn sm" id="src">👁 Source</a></div>
  </section>
</main>
<script>
const bankUrl='data/bank.json';
let items=[], i=0; const qDiv=document.getElementById('q');
function norm(s){return (s||'').toLowerCase().replace(/\s+/g,' ').trim();}
function render(){const x=items[i%items.length]; qDiv.innerHTML='<h3>'+x.q+'</h3>'; 
  document.getElementById('hint').onclick=()=>alert(x.hint||'');
  document.getElementById('src').onclick=()=>alert(x.src||'');
  document.getElementById('chk').onclick=()=>{ const ok=norm(document.getElementById('ans').value)===norm(x.a); document.getElementById('msg').textContent= ok?'✅ Correct':'❌ Try again'; if(ok){updateCoins(5); i++; document.getElementById('ans').value=''; render();} };
}
fetch(bankUrl).then(r=>r.json()).then(d=>{items=d.items; render();});
</script>
</body>
</html>