<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Multiple Choice — Rugby</title>
  <link rel="stylesheet" href="../assets/base.css">
  <script defer src="../assets/app.js"></script>
</head>
<body>
<main class="wrap">
  <section class="card">
    <h2>Multiple Choice — Rugby</h2>
    <div id="qbox"></div>
    <div class="hud"><span class="badge" id="score">Score: 0</span><a class="pill-btn sm" id="hint">? Hint</a><a class="pill-btn sm" id="src">👁 Source</a></div>
  </section>
</main>
<script>
const bankUrl='data/bank.json';
let items=[], i=0, score=0; const qbox=document.getElementById('qbox');
function render(){
  const q=items[i%items.length];
  const letters=['a','b','c','d'];
  let grid='<div class="mcq-grid">';
  q.opts.forEach((o,idx)=>{ grid+=`<button class="pill-btn" data-i="${idx}">${letters[idx]}) ${o}</button>`; });
  grid+='</div>';
  qbox.innerHTML=`<h3>${q.q}</h3>${grid}`;
  document.getElementById('hint').onclick=()=>alert(q.hint||'Consider alignment, gaps, or coverage.');
  document.getElementById('src').onclick=()=>alert(q.src||'See team PDFs.');
  qbox.querySelectorAll('button[data-i]').forEach(b=>b.onclick=()=>{
    if(q.opts[b.dataset.i]===q.a){ score++; updateCoins(10);} else { score=Math.max(0,score-1); }
    document.getElementById('score').textContent='Score: '+score;
    i++; render();
  });
}
fetch(bankUrl).then(r=>r.json()).then(d=>{items=d.items; render();});
</script>
</body>
</html>