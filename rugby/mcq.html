<!doctype html><html><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Rugby ‚Äî Multiple Choice</title>

<link rel='stylesheet' href='../assets/base.css' onerror="this.href='../rugby/base.css'">
<style>
.hint-overlay{position:fixed;inset:0;background:#000000bb;display:none;align-items:center;justify-content:center;z-index:9999}
.hint-modal{width:90vw;height:90vh;background:#1a120e;border:1px solid #ffffff22;border-radius:16px;box-shadow:0 10px 40px #000000aa;display:flex;flex-direction:column;overflow:hidden}
.hint-head{display:flex;justify-content:space-between;align-items:center;padding:10px 14px;border-bottom:1px solid #ffffff22}
.hint-body{padding:14px;overflow:auto;line-height:1.6}
.qcard{position:relative;max-width:1100px;margin:auto;padding:18px 22px;border-radius:16px;background:#1b140f;border:1px solid #ffffff22;box-shadow:0 8px 30px #00000055;min-height:240px}
.qbtn{position:absolute;border-radius:999px;width:46px;height:46px;display:grid;place-items:center;padding:0;font-weight:900}
.qbtn.eye{top:10px;right:10px}
.qbtn.hint{right:10px;bottom:10px}
</style>
<script>
(function(){
  window.__openRugbyPDF=function(name,page){ window.open('resources/viewer.html?file='+encodeURIComponent(name||'irish')+'&page='+encodeURIComponent(page||1),'_blank'); };
  function openHint(text){
    var ov=document.querySelector('.hint-overlay'); if(!ov) return;
    ov.querySelector('.hint-body').innerHTML = text || 'No hint available.';
    ov.style.display='flex';
  }
  window.__bindQE=function(container,item){
    var h=document.createElement('button'); h.className='pill-btn qbtn hint'; h.textContent='?'; h.title='Hint'; h.onclick=function(){ openHint(item.hint||''); }; container.appendChild(h);
    var e=document.createElement('button'); e.className='pill-btn qbtn eye'; e.textContent='üëÅ'; e.title='Open source page';
    e.onclick=function(){ __openRugbyPDF(item.src||'irish', item.page||1); }; container.appendChild(e);
    if(!document.querySelector('.hint-overlay')){
      var ov=document.createElement('div'); ov.className='hint-overlay';
      ov.innerHTML="<div class='hint-modal'><div class='hint-head'><strong>Hint</strong><button class='pill-btn' id='hintClose'>‚úñ</button></div><div class='hint-body'></div></div>";
      document.body.appendChild(ov);
      document.addEventListener('click',function(ev){ if(ev.target===ov) ov.style.display='none'; });
      document.getElementById('hintClose').onclick=function(){ ov.style.display='none'; };
    }
  }
})();
</script>

</head><body>
<a class="back pill-btn" href="index.html">‚Üê Back</a>
<script src="../assets/app.js" onerror="var s=document.createElement('script');s.textContent=`
// Corner buttons safety: only inject if the global site app didn't already do it.
(function(){
  if(document.querySelector('[data-site-corners]')) return;
  const make = (cls, html, href) => {
    const b = document.createElement('a'); b.href=href||'#'; b.className='pill-btn'; b.style.position='fixed';
    b.style.zIndex='30'; b.style.width='42px'; b.style.height='42px'; b.style.borderRadius='999px'; b.style.display='grid'; b.style.placeItems='center';
    b.title = cls;
    return b;
  };
  const prof = make('profile','üë§','../profile.html'); prof.style.left='12px'; prof.style.top='12px';
  const back = make('back','‚Üê','../index.html'); back.style.left='12px'; back.style.top='60px'; back.style.width='64px';
  const menu = make('menu','‚ò∞','#'); menu.style.right='12px'; menu.style.top='12px';
  const chat = make('chat','üí¨','#'); chat.style.left='12px'; chat.style.bottom='12px';
  const slots = make('slots','üé∞','#'); slots.style.right='12px'; slots.style.bottom='12px';
  const holder = document.createElement('div'); holder.dataset.siteCorners='1';
  holder.append(prof, back, menu, chat, slots); document.body.appendChild(holder);
})();
`;document.head.appendChild(s)"></script>
<main class="wrap" style="padding:0 12px">
  <section class="card" style="max-width:none;width:100%;min-height:86vh;display:flex;flex-direction:column">
    <div style="padding:16px 12px">
      <h1>Rugby ‚Äî Multiple Choice</h1>
      <div class="progress"><div class="bar" id="pbar"></div></div>
    </div>
    <div id="stage" style="flex:1;display:grid;place-items:center;padding:0 10px"></div>
  </section>
</main>
<div class='hint-overlay'><div class='hint-modal'><div class='hint-head'><strong>Hint</strong><button class='pill-btn' id='hintClose'>‚úñ</button></div><div class='hint-body'></div></div></div>
<script>
function el(t,c,h){ var d=document.createElement(t); if(c) d.className=c; if(h!=null) d.innerHTML=h; return d; }
var qs=[],i=0,correct=0;
function ensure50(a){ while(a.length<50) a=a.concat(a.slice(0, Math.min(50-a.length,a.length))); return a.slice(0, Math.max(50,a.length)); }
function renderQ(){
  var s=document.getElementById('stage'); s.innerHTML='';
  if(i>=qs.length){
    var pct=Math.round(100*correct/qs.length);
    s.innerHTML='<div class="qcard" style="text-align:center"><h2>Done!</h2><p>Score: <span class="badge '+(pct>=75?'badge-green':(pct>=40?'badge-yellow':'badge-red'))+'">'+correct+'/'+qs.length+' ('+pct+'%)</span></p><a class="pill-btn" href="index.html">Back to hub</a></div>';
    document.getElementById('pbar').style.width='100%';
    var key='progress_rugby'; var prev=parseInt(localStorage.getItem(key)||'0',10)||0; if(pct>prev) localStorage.setItem(key, String(pct));
    return;
  }
  var q=qs[i]; document.getElementById('pbar').style.width=Math.round(100*i/qs.length)+'%';
  var card=el('div','qcard'); card.innerHTML='<h2 style="margin:10px 0 18px 0">'+q.q+(q.q.trim().endsWith('?')?'':'?')+'</h2>'; s.appendChild(card);
  if(window.__bindQE) window.__bindQE(card, q);
  var opts=(q.options&&q.options.length)?q.options.slice():['True','False'];
  opts.forEach(function(opt){ var b=el('button','pill-btn',opt); b.style.fontSize='20px'; b.style.padding='16px 22px'; b.style.margin='7px auto'; b.style.display='block';
    b.onclick=function(){ var ans=q.a; var ok=Array.isArray(ans)?(ans.indexOf(opt)>-1):(opt===ans); if(ok) correct++; i++; renderQ(); }; card.appendChild(b); });
}
var x=new XMLHttpRequest(); x.onreadystatechange=function(){ if(x.readyState==4){ var data=JSON.parse(x.responseText); qs=ensure50(data); renderQ(); } }; x.open('GET','qbank.json',true); x.send();
</script>
</body></html>
