<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Rugby ‚Ä¢ Quizzes</title>
<link rel="preconnect" href="https://cdn.jsdelivr.net"/>
<script src="https://cdn.jsdelivr.net/npm/tesseract.js@4/dist/tesseract.min.js"></script>
<style>
  :root{ --fg:#fff; --bg1:#0b0b0f; --bg2:#1b0b00; --bg3:#3a0c00; --panel:#1a0f0a; --brand:#ff6b00; --muted:#ffd9b3; --pill:linear-gradient(90deg,#ff6b00,#ff3b3b); }
  *{box-sizing:border-box} html,body{height:100%}
  body{margin:0; font-family:"Comic Sans MS","Comic Sans",cursive; color:var(--fg); overflow-x:hidden;
       background: radial-gradient(1200px 700px at 50% 110%, #ff9f1a40, transparent 60%), linear-gradient(120deg, var(--bg1), var(--bg2) 40%, var(--bg3));}
  a{color:#ffd166}
  .wrap{min-height:100vh; display:flex; align-items:center; justify-content:center; padding:8vh 24px; text-align:center;}
  h1{font-size:clamp(2rem,4vw+1rem,3rem); text-shadow:0 2px 18px #000; margin:0 0 8px;}
  .sub{opacity:.9; margin:0 0 18px;}

  /* round fixed buttons */
  .round-btn{position:fixed; width:56px; height:56px; border-radius:50%; display:grid; place-items:center; color:#fff; cursor:pointer;
             background: radial-gradient(circle at 30% 30%, #ff9f1a, #ff6b00 60%, #3a0c00 100%); box-shadow: 0 8px 20px #000a; z-index:100;}
  .profile-btn{left:16px; top:16px;} .slots-btn{right:16px; bottom:16px;} .chat-btn{left:16px; bottom:16px;} .menu-btn{right:16px; top:16px;}
  .burger{position:relative; width:26px; height:18px;}
  .burger span{position:absolute; left:0; width:100%; height:3px; background:#fff; border-radius:2px; transition:transform .25s ease, opacity .2s ease, top .25s ease;}
  .burger span:nth-child(1){top:0} .burger span:nth-child(2){top:7.5px} .burger span:nth-child(3){top:15px}
  .menu-btn.open .burger span:nth-child(1){top:7.5px; transform:rotate(45deg)} .menu-btn.open .burger span:nth-child(2){opacity:0} .menu-btn.open .burger span:nth-child(3){top:7.5px; transform:rotate(-45deg)}

  /* popovers */
  .popover{position:absolute; width:560px; max-width:95vw; background:var(--panel); border:1px solid #ffffff1f; border-radius:14px; padding:14px; box-shadow:0 12px 24px #000a; display:none; z-index:2000; color:#ffd9b3; overflow:hidden;}
  .row{display:flex; align-items:center; gap:10px; margin:8px 0; flex-wrap:wrap;}
  .btn{padding:12px 18px; border-radius:999px; border:none; font-weight:800; background:linear-gradient(90deg,#ff6b00,#ff3b3b); color:#fff; cursor:pointer; box-shadow:0 8px 18px #0008; font-family:inherit;}
  select, input[type="range"], input[type="text"], input[type="number"]{background:#2a1b12; color:#fff; border:1px solid #fff2; border-radius:8px; padding:6px 8px; font-family:inherit;}
  .back-fab{position:fixed; left:16px; top:86px; z-index:120; background:#2a1b12; border:1px solid #ffffff1a; color:#fff; padding:8px 12px; border-radius:999px; text-decoration:none;}

  /* pill buttons like screenshot but orange-red */
  .pill-btn{display:block; text-decoration:none; color:#fff; font-weight:800; letter-spacing:.3px; text-align:center;
            background:linear-gradient(90deg,#ff6b00,#ff3b3b); border-radius:999px; padding:16px 24px; box-shadow:0 8px 18px #0008; transition:transform .12s ease, box-shadow .12s ease, filter .12s ease; position:relative; width:100%;}
  .pill-btn:hover{transform: translateY(-1px); box-shadow:0 12px 24px #000a; filter:brightness(1.03);}
  .grid{display:grid; gap:16px; width:min(1400px,95vw); margin:16px auto;}
  #colSelWrap{margin-top:10px; display:flex; justify-content:center; gap:10px; color:#ffd9b3;}

  /* tooltips for course descriptions */
  .tip{position:fixed; pointer-events:none; padding:10px 12px; border-radius:10px; background:#120b07ee; border:1px solid #ff6b0040; color:#ffd9b3; opacity:0; transform:translateY(-6px); transition:opacity .12s ease, transform .12s ease; z-index:9000;}
</style>
</head>
<body>
<a class="round-btn profile-btn" href="#" id="profileLink" title="Profile" aria-label="Profile">üë§</a>
<button class="round-btn menu-btn" id="menuBtn" title="Menu" aria-label="Menu"><div class="burger" aria-hidden="true"><span></span><span></span><span></span></div></button>
<button class="round-btn slots-btn" id="slotsBtn" title="Mini Slots" aria-label="Mini Slots">üé∞</button>
<button class="round-btn chat-btn" id="chatBtn" title="Assistant" aria-label="Assistant">üí¨</button>
<a class="back-fab" href="#" id="backBtn">‚Üê Back</a>

<style>
.qcard{background:var(--panel); border:1px solid #ffffff1a; border-radius:16px; padding:16px; margin:12px auto; max-width:1100px; text-align:left;}
.qrow{margin:10px 0}
.dnd-wrap{display:flex; gap:14px; flex-wrap:wrap}
.bucket{min-width:180px; min-height:80px; padding:10px; border:1px dashed #ffffff44; border-radius:10px;}
.token{padding:6px 10px; border-radius:999px; background:#2a1b12; border:1px solid #ffffff22; cursor:grab; display:inline-block; margin:6px}
.correct{outline:2px solid #1cc862} .wrong{outline:2px solid #ff3b30}
</style>
<main class="wrap"><div style="width:100%">
  <h1>Rugby ‚Ä¢ Quizzes & Puzzles</h1>
  <div id="quiz"></div>
  <div class="qcard"><button class="btn" id="gradeAll">Grade All</button> <span id="score"></span></div>
</div></main>
<script>
// Based on your Irish/OIRC back plays options
const plays={{ 
  'X / Switch': ['10‚Äì12 switch','10‚Äì13 crash','10‚Äì15 pull behind 13'],
  'Swap': ['10‚Äì13 crash on D12','10‚Äì12 pull behind 13','12‚Äì14 2nd-level crash','12‚Äì15 wide'],
  'MGM': ['10‚Äì12 inside crash','10‚Äì13 outside crash','10‚Äì11 pull to go wide'],
  'M1 (Miss 1)': ['13‚Äì12 loop','13‚Äì11 tip line inside crash'],
  'Express': ['12 crash on D10','12‚Äì13 tight crash','12‚Äì10 pull behind 13'],
  'Wing In': ['9‚Äì11 overload D10 crash','9‚Äì10 crash','9‚Äì13 crash'],
  '2‚Äì4 Switch': ['10/12 drift decoy -> 10‚Äì13 switch','10‚Äì12 back-door option']
}};
function choice(q,opts,ans){ const id='q_'+Math.random().toString(36).slice(2); const wrap=document.createElement('div'); wrap.className='qcard'; wrap.innerHTML='<div class="qrow"><strong>'+q+'</strong></div>'; opts.forEach(function(opt,i){ const lab=document.createElement('label'); lab.style.display='block'; lab.className='qrow'; const r=document.createElement('input'); r.type='radio'; r.name=id; r.value=i; lab.appendChild(r); lab.appendChild(document.createTextNode(' '+opt)); wrap.appendChild(lab); }); wrap.dataset.answer=String(ans); return wrap; }
function fill(q,answer){ const wrap=document.createElement('div'); wrap.className='qcard'; wrap.innerHTML='<div class="qrow"><strong>'+q+'</strong></div>'; const inp=document.createElement('input'); inp.type='text'; inp.style.width='100%'; inp.dataset.answer=answer.toLowerCase(); wrap.appendChild(inp); return wrap; }
function dnd(q, buckets){ const wrap=document.createElement('div'); wrap.className='qcard'; wrap.innerHTML='<div class="qrow"><strong>'+q+'</strong></div>'; const area=document.createElement('div'); area.className='dnd-wrap'; wrap.appendChild(area);
  Object.keys(buckets).forEach(function(name){ const b=document.createElement('div'); b.className='bucket'; b.dataset.name=name; const h=document.createElement('div'); h.style.fontWeight='800'; h.textContent=name; b.appendChild(h); area.appendChild(b); });
  const allTokens=[].concat.apply([], Object.values(buckets)); allTokens.forEach(function(t){ const el=document.createElement('div'); el.className='token'; el.draggable=true; el.textContent=t; el.addEventListener('dragstart',e=>{ e.dataTransfer.setData('text/plain', t); }); area.appendChild(el); });
  wrap.dataset.dnd=JSON.stringify(buckets); area.addEventListener('dragover',e=>e.preventDefault()); area.addEventListener('drop',function(e){ e.preventDefault(); const t=e.dataTransfer.getData('text/plain'); const tar=e.target.closest('.bucket'); if(!tar) return; const el=[].find.call(area.querySelectorAll('.token'),x=>x.textContent===t && x.parentElement===area); if(el) tar.appendChild(el); });
  return wrap;
}
const quiz=document.getElementById('quiz'); const cards=[];
// 1-30 MCQ (various)
let idx=0;
Object.keys(plays).forEach(function(p){ const opts=plays[p]; const q='In '+p+', which option attacks widest?'; const ans=opts.findIndex(x=>/pull|wide/i.test(x))||0; cards.push(choice(q, opts, ans)); });
// add additional randomized MCQs until 30
while(cards.length<30){ const keys=Object.keys(plays); const k=keys[Math.floor(Math.random()*keys.length)]; const opts=plays[k]; const i=Math.floor(Math.random()*opts.length); const q='Which of these belongs to "'+k+'"?'; cards.push(choice(q, opts, i)); }
// 31-45 fill-in
['MGM','Express','Wing In','Swap','X / Switch','M1 (Miss 1)','2‚Äì4 Switch','Swap','Express','MGM','M1 (Miss 1)','X / Switch','Wing In','Swap','2‚Äì4 Switch'].forEach(function(name){ const ph=plays[name][0]; cards.push(fill('Type any valid option from "'+name+'".', ph.toLowerCase())); });
// 46-50 matching puzzles
cards.push(dnd('Match options to play', {'MGM':['10‚Äì11 pull to go wide','10‚Äì13 outside crash'], 'Express':['12‚Äì10 pull behind 13','12 crash on D10']}));
cards.push(dnd('Match options to play', {'Swap':['12‚Äì14 2nd-level crash','10‚Äì12 pull behind 13'], 'X / Switch':['10‚Äì15 pull behind 13']}));
cards.push(dnd('Match options to play', {'Wing In':['9‚Äì13 crash','9‚Äì10 crash'], 'M1 (Miss 1)':['13‚Äì12 loop']}));
cards.push(dnd('Match options to play', {'2‚Äì4 Switch':['10‚Äì13 switch','10‚Äì12 back-door option'], 'Express':['12‚Äì13 tight crash']}));
cards.push(dnd('Match options to play', {'X / Switch':['10‚Äì12 switch'], 'MGM':['10‚Äì12 inside crash']}));

cards.forEach(c=>quiz.appendChild(c));

function grade(){ let score=0, total=cards.length;
  cards.forEach(function(c){ if(c.dataset.answer!=null){ // radio or fill
      const ans=c.dataset.answer; const r=c.querySelector('input[type="radio"]:checked'); const t=c.querySelector('input[type="text"]');
      if(r && r.value===ans){ score++; c.classList.add('correct'); } else if(t){ if(t.value.trim().toLowerCase().includes(ans)){ score++; c.classList.add('correct'); } else { c.classList.add('wrong'); } } else if(r){ c.classList.add('wrong'); }
    } else if(c.dataset.dnd){ const truth=JSON.parse(c.dataset.dnd); let ok=true; for(const name in truth){ const bucket=c.querySelector('.bucket[data-name="'+name+'"]'); const texts=[].map.call(bucket.querySelectorAll('.token'),x=>x.textContent); const need=truth[name]; need.forEach(n=>{ if(texts.indexOf(n)===-1) ok=false; }); } if(ok) score++; c.classList.add(ok?'correct':'wrong'); }
  });
  document.getElementById('score').textContent='Score: '+score+' / '+total+' ('+Math.round(score/total*100)+'%)';
  const key='progress_rugby1'; const prev=parseInt(localStorage.getItem(key)||'0',10); const next=Math.max(prev, Math.round(score/total*100)); localStorage.setItem(key, String(next));
}
document.getElementById('gradeAll').onclick=grade;
</script>

<!-- Mini Slots -->
<div class="popover" id="slotsPopover" role="dialog" aria-label="Mini Slots">
  <h3>Mini Slots</h3>
  <div class="row" style="justify-content:space-between">
    <div class="row"><strong>Reels</strong><select id="reelSelect"><option>3</option><option>4</option><option>5</option><option selected>6</option></select></div>
    <div class="row"><strong>Bet</strong><select id="betSelect"><option>10</option><option selected>25</option><option>50</option><option>100</option></select></div>
  </div>
  <div class="row" style="justify-content:center;margin-top:10px"><button class="btn" id="spinBtn">Spin</button></div>
</div>

<!-- Hamburger Menu -->
<div class="popover" id="menuPanel" role="dialog" aria-label="Menu">
  <h3>Menu</h3>
  <div class="row"><strong>Music</strong> <label style="margin-left:auto">On/Off <input type="checkbox" id="musicToggle"></label></div>
  <div class="row"><label>Volume</label><select id="musicVol"><option value="0.2">Low</option><option value="0.6" selected>Medium</option><option value="1">High</option><option value="0">Mute</option></select>
    <label>Track</label><select id="musicTrack"><option value="default">Default</option><option value="arcade">Arcade</option><option value="chill">Chill</option></select></div>
  <hr style="border-color:#ffffff18">
  <div class="row"><strong>Display</strong></div>
  <div class="row"><label>Theme</label><select id="themeSel"><option>Dark</option><option>Light</option><option>High Contrast</option></select>
    <label>Text Size</label><select id="textSel"><option>Default</option><option>Small</option><option>Large</option></select></div>
  <hr style="border-color:#ffffff18">
  <div class="row"><strong>Notifications</strong></div>
  <div class="row"><label>Sound Alerts</label><input type="checkbox" id="notifSound"><label>Pop-ups</label><input type="checkbox" id="notifPopup" checked>
    <label>Frequency</label><select id="notifFreq"><option>All</option><option>Major Only</option></select></div>
</div>

<!-- Chat -->
<div class="popover" id="chatPopover"><h3 id="chatTitle">Assistant</h3>
  <div id="chatLog" style="height:260px;overflow:auto;background:#120b07;border:1px solid #ffffff1a;border-radius:10px;padding:10px"></div>
  <div class="row" style="margin-top:8px">
    <input type="text" id="chatInput" placeholder="Ask me anything about the site‚Ä¶" style="flex:1;background:#2a1b12;border:1px solid #ffffff1a;border-radius:10px;padding:10px">
    <label class="btn" style="padding:10px 12px;">
      üì∑ <input type="file" id="imgInput" accept="image/*" style="display:none">
    </label>
    <button class="btn" id="sendBtn">Send</button>
  </div>
  <small id="chatTip" style="opacity:.8">Understands: English, Espa√±ol, Fran√ßais, ‰∏≠Êñá, ÿßŸÑÿπÿ±ÿ®Ÿäÿ©, ‡§π‡§ø‡§®‡•ç‡§¶‡•Ä, Portugu√™s, Deutsch, Êó•Êú¨Ë™û, –†—É—Å—Å–∫–∏–π.</small>
</div>

<script>
const $=id=>document.getElementById(id);
function base(){ const segs=location.pathname.split('/').filter(Boolean); return location.origin+(segs.length?('/'+segs[0]):''); }
$('backBtn').onclick=(e)=>{e.preventDefault(); try{history.length>1?history.back():location.assign(base()+'/');}catch(_){location.assign(base()+'/');}};
$('profileLink').onclick=(e)=>{e.preventDefault(); fetch(base()+'/profile.html',{method:'HEAD'}).then(r=>{location.href=r.ok?base()+'/profile.html':base()+'/profile/'}).catch(()=>location.href=base()+'/profile/')};

function openPanelAt(btn, panel, pos="below"){ const r=btn.getBoundingClientRect(); panel.style.display="block"; requestAnimationFrame(()=>{ const top=pos==="below"?(r.bottom+6):(r.top-panel.offsetHeight-6); let left=r.right-panel.offsetWidth; if(left<10) left=10; panel.style.top=top+"px"; panel.style.left=left+"px"; panel.classList.add('open'); }); }
function closePanels(){ document.querySelectorAll('.popover').forEach(p=>{p.classList.remove('open'); p.style.display='none';}); document.querySelector('.menu-btn').classList.remove('open'); }
window.addEventListener('click', e=>{ if(!e.target.closest('.popover') && !e.target.closest('.round-btn')) closePanels(); });

const menuBtn=$('menuBtn'), menuPanel=$('menuPanel'); menuBtn.onclick=()=>{ const open=menuPanel.style.display==='block'; if(open){closePanels();} else{ closePanels(); openPanelAt(menuBtn,menuPanel,"below"); menuBtn.classList.add('open'); } };
const slotsPopover=$('slotsPopover'); $('slotsBtn').onclick=()=>{ closePanels(); openPanelAt(slotsBtn, slotsPopover, "above"); };
const chatPopover=$('chatPopover'); $('chatBtn').onclick=()=>{ closePanels(); openPanelAt(chatBtn, chatPopover, "above"); };

/* Chatbot: 10 languages + image OCR */
const chatLog=$('chatLog'), chatInput=$('chatInput'), chatTitle=$('chatTitle');
function addMsg(who, text){ const bubble=document.createElement('div'); bubble.style.display='flex'; bubble.style.justifyContent= who==='me' ? 'flex-end' : 'flex-start'; const inner=document.createElement('div'); inner.style.padding='8px 10px'; inner.style.borderRadius='12px'; inner.style.margin='6px 0'; inner.style.maxWidth='92%'; inner.style.background= who==='me' ? '#2a1b12' : '#1f140d'; inner.textContent=text; bubble.appendChild(inner); chatLog.appendChild(bubble); chatLog.scrollTop=chatLog.scrollHeight; }
function addImagePreview(file){ const url=URL.createObjectURL(file); const img=document.createElement('img'); img.src=url; img.style.maxWidth='50%'; img.style.border='1px solid #ffffff1a'; img.style.borderRadius='10px'; const wrap=document.createElement('div'); wrap.style.display='flex'; wrap.style.justifyContent='flex-end'; wrap.style.margin='6px 0'; wrap.appendChild(img); chatLog.appendChild(wrap); chatLog.scrollTop=chatLog.scrollHeight; }

function detectLang(s){
  if(/[\\u0600-\\u06FF]/.test(s)) return 'ar';              // Arabic
  if(/[\\u0900-\\u097F]/.test(s)) return 'hi';              // Hindi
  if(/[\\u3040-\\u30ff\\u4e00-\\u9faf]/.test(s) && /[\\u3040-\\u30ff]/.test(s)) return 'ja';  // Japanese (Kana present)
  if(/[\\u4e00-\\u9fff]/.test(s)) return 'zh';              // Chinese
  if(/[√°√©√≠√≥√∫√±¬ø¬°]/i.test(s) || /(hola|curso|ajustes|perfil)/i.test(s)) return 'es';
  if(/[√©√®√™√†√ß√π√¥√Æ]/i.test(s) || /(bonjour|profil|r√©glages)/i.test(s)) return 'fr';
  if(/[√§√∂√º√ü]/i.test(s) || /(hallo|profil|einstellung)/i.test(s)) return 'de';
  if(/(ol√°|curso|configura√ß√µes|perfil)/i.test(s)) return 'pt';
  if(/(–ø—Ä–∏–≤–µ—Ç|–ø—Ä–æ—Ñ–∏–ª—å|–Ω–∞—Å—Ç—Ä–æ–π–∫)/i.test(s)) return 'ru';
  return 'en';
}
const replies={
  en:{hi:"Hey! I‚Äôm your Assistant. Ask me about courses, rugby plays, chess openings, or settings.",help:"I can help with: navigating courses, explaining rugby plays (from your PDFs), and basic OCR on screenshots.",slots:"Open üé∞ for Mini Slots to earn coins.",profile:"Tap üë§ for profile and settings.",image:"I‚Äôm reading your screenshot‚Ä¶"},
  es:{hi:"¬°Hola! Soy tu asistente.",help:"Puedo ayudarte con cursos, jugadas de rugby y leer texto de capturas.",slots:"Abre üé∞ para ganar monedas.",profile:"Pulsa üë§ para tu perfil.",image:"Estoy leyendo tu captura‚Ä¶"},
  fr:{hi:"Salut ! Je suis votre assistant.",help:"Je peux aider avec les cours, les sch√©mas de rugby et l‚ÄôOCR de captures.",slots:"Ouvrez üé∞ pour gagner des pi√®ces.",profile:"Appuyez sur üë§ pour le profil.",image:"Je lis votre capture‚Ä¶"},
  zh:{hi:"‰Ω†Â•ΩÔºÅÊàëÊòØ‰Ω†ÁöÑÂä©ÁêÜ„ÄÇ",help:"ÊàëÂèØ‰ª•Â∏ÆÂä©ËØæÁ®ã„ÄÅÊ©ÑÊ¶ÑÁêÉÊàòÊúØÔºåÂπ∂ÂØπÊà™ÂõæÂÅöOCRËØÜÂà´„ÄÇ",slots:"ÁÇπÂáª üé∞ ËµöÂèñÈáëÂ∏Å„ÄÇ",profile:"ÁÇπÂáª üë§ ÊâìÂºÄ‰∏™‰∫∫ËµÑÊñô„ÄÇ",image:"Ê≠£Âú®ËØÜÂà´‰Ω†ÁöÑÊà™Âõæ‚Ä¶"},
  ar:{hi:"ŸÖÿ±ÿ≠ÿ®Ÿãÿß! ÿ£ŸÜÿß ŸÖÿ≥ÿßÿπÿØŸÉ.",help:"ÿ£ÿ≥ÿ™ÿ∑Ÿäÿπ ÿßŸÑŸÖÿ≥ÿßÿπÿØÿ© ŸÅŸä ÿßŸÑÿØŸàÿ±ÿßÿ™ ŸàÿÆÿ∑ÿ∑ ÿßŸÑÿ±ÿ¨ÿ®Ÿä ŸàŸÇÿ±ÿßÿ°ÿ© ÿßŸÑÿµŸàÿ± (OCR).",slots:"ÿßŸÅÿ™ÿ≠ üé∞ ŸÑŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿπŸÖŸÑÿßÿ™.",profile:"ÿßÿ∂ÿ∫ÿ∑ üë§ ŸÑŸÑŸÖŸÑŸÅ ÿßŸÑÿ¥ÿÆÿµŸä.",image:"ÿ£ÿ≠ŸÑŸëŸÑ ŸÑŸÇÿ∑ÿ© ÿßŸÑÿ¥ÿßÿ¥ÿ©‚Ä¶"},
  hi:{hi:"‡§®‡§Æ‡§∏‡•ç‡§§‡•á! ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§∏‡§π‡§æ‡§Ø‡§ï ‡§π‡•Ç‡§Å‡•§",help:"‡§Æ‡•à‡§Ç ‡§ï‡•ã‡§∞‡•ç‡§∏, ‡§∞‡§ó‡•ç‡§¨‡•Ä ‡§™‡•ç‡§≤‡§æ‡§® ‡§î‡§∞ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§®‡§∂‡•â‡§ü OCR ‡§Æ‡•á‡§Ç ‡§Æ‡§¶‡§¶ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•Ç‡§Å‡•§",slots:"‡§∏‡§ø‡§ï‡•ç‡§ï‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è üé∞ ‡§ñ‡•ã‡§≤‡•á‡§Ç‡•§",profile:"üë§ ‡§™‡•ç‡§∞‡•ã‡§´‡§º‡§æ‡§á‡§≤ ‡§¶‡•á‡§ñ‡•á‡§Ç‡•§",image:"‡§Ü‡§™‡§ï‡•Ä ‡§õ‡§µ‡§ø ‡§™‡§¢‡§º ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å‚Ä¶"},
  pt:{hi:"Ol√°! Sou seu assistente.",help:"Ajudo com cursos, jogadas de r√∫gbi e OCR de imagens.",slots:"Abra üé∞ para moedas.",profile:"Toque üë§ para o perfil.",image:"Lendo sua imagem‚Ä¶"},
  de:{hi:"Hi! Ich bin dein Assistent.",help:"Ich helfe bei Kursen, Rugby-Spielz√ºgen und Screenshot-OCR.",slots:"√ñffne üé∞ f√ºr M√ºnzen.",profile:"Tippe üë§ f√ºr dein Profil.",image:"Ich lese deinen Screenshot‚Ä¶"},
  ja:{hi:"„Åì„Çì„Å´„Å°„ÅØÔºÅ„Ç¢„Ç∑„Çπ„Çø„É≥„Éà„Åß„Åô„ÄÇ",help:"„Ç≥„Éº„Çπ„ÇÑ„É©„Ç∞„Éì„Éº„ÅÆ„Éó„É¨„Éº„ÄÅÁîªÂÉè„ÅÆOCR„ÇíÊâã‰ºù„Åà„Åæ„Åô„ÄÇ",slots:"„Ç≥„Ç§„É≥„ÅÆ„Åü„ÇÅüé∞„ÇíÈñã„ÅÑ„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ",profile:"üë§„Åß„Éó„É≠„Éï„Ç£„Éº„É´„Å∏„ÄÇ",image:"„Çπ„ÇØ„É™„Éº„É≥„Ç∑„Éß„ÉÉ„Éà„ÇíËß£Êûê‰∏≠‚Ä¶"},
  ru:{hi:"–ü—Ä–∏–≤–µ—Ç! –Ø –≤–∞—à –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç.",help:"–ü–æ–º–æ–≥–∞—é —Å –∫—É—Ä—Å–∞–º–∏, —Ä–µ–≥–±–∏ –∏ OCR —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤.",slots:"–û—Ç–∫—Ä–æ–π—Ç–µ üé∞, —á—Ç–æ–±—ã –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å –º–æ–Ω–µ—Ç—ã.",profile:"–ù–∞–∂–º–∏—Ç–µ üë§ –¥–ª—è –ø—Ä–æ—Ñ–∏–ª—è.",image:"–ß–∏—Ç–∞—é –≤–∞—à —Å–∫—Ä–∏–Ω—à–æ—Ç‚Ä¶"}
};
function respond(msg){
  const lang=detectLang(msg);
  let r=replies[lang].help;
  if(/\\b(slot|reel|spin|lever|üé∞)\\b/i.test(msg)) r=replies[lang].slots;
  else if(/\\b(profile|üë§|avatar|followers|following|friends)\\b/i.test(msg)) r=replies[lang].profile;
  else if(/\\b(hi|hello|hey|hola|bonjour|salut|‰Ω†Â•Ω|ŸÖÿ±ÿ≠ÿ®ÿß|‡§®‡§Æ‡§∏‡•ç‡§§‡•á|ol√°|hallo|„Åì„Çì„Å´„Å°„ÅØ|–ø—Ä–∏–≤–µ—Ç)\\b/i.test(msg)) r=replies[lang].hi;
  return r;
}
function send(){ const m=chatInput.value.trim(); if(!m) return; addMsg('me', m); chatInput.value=''; addMsg('bot', respond(m)); }
document.getElementById('sendBtn').onclick=send;
chatInput.addEventListener('keydown', e=>{ if(e.key==='Enter') send(); });
setTimeout(()=> addMsg('bot', "üëã Welcome! I can answer in 10 languages and read text from screenshots. Ask me anything."), 400);

/* Image input with OCR + color gist */
$('imgInput').addEventListener('change', async (e)=>{
  const f=e.target.files[0]; if(!f) return;
  addImagePreview(f);
  addMsg('bot', replies[detectLang('')].image);
  try{
    const { createWorker } = Tesseract;
    const worker = await Tesseract.createWorker();
    await worker.loadLanguage('eng');
    await worker.initialize('eng');
    const { data: { text } } = await worker.recognize(f);
    await worker.terminate();
    const clean=text.trim().replace(/\\s+/g,' ');
    if(clean){
      addMsg('bot', "OCR: "+clean.slice(0,400));
    } else {
      addMsg('bot', "I couldn't find readable text. (Tip: upload a sharper screenshot.)");
    }
  }catch(err){
    addMsg('bot', "OCR error (still fine to proceed): "+(err.message||err));
  }
});
</script>
</body></html>