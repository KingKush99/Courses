<!doctype html><html lang='en'><head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width,initial-scale=1'><title>Complex Analysis ‚Äî Fill in the Blanks</title>

<link rel='stylesheet' href='../assets/base.css'>
<style>
.hint-overlay{position:fixed;inset:0;background:#000000bb;display:none;align-items:center;justify-content:center;z-index:9999}
.hint-modal{width:90vw;height:90vh;background:#1a120e;border:1px solid #ffffff22;border-radius:16px;box-shadow:0 10px 40px #000000aa;display:flex;flex-direction:column;overflow:hidden}
.hint-head{display:flex;justify-content:space-between;align-items:center;padding:10px 14px;border-bottom:1px solid #ffffff22}
.hint-body{padding:14px;overflow:auto;line-height:1.6}
.qcard{position:relative;max-width:1100px;margin:auto;padding:18px 22px;border-radius:16px;background:#1b140f;border:1px solid #ffffff22;box-shadow:0 8px 30px #00000055;min-height:240px}
.qbtn{position:absolute;border-radius:999px;width:46px;height:46px;display:grid;place-items:center;padding:0;font-weight:900}
.qbtn.eye{top:10px;right:10px}
.qbtn.hint{right:10px;bottom:10px}
</style>
<script>
(function(){
  window.__openSourcePDF = function(page){ window.open('resources/viewer.html?page='+encodeURIComponent(page||1),'_blank'); };
  function openHint(text){
    var ov=document.querySelector('.hint-overlay'); if(!ov) return;
    ov.querySelector('.hint-body').innerHTML = text || 'No hint available.';
    ov.style.display='flex';
  }
  window.__bindQE = function(container, item){
    var hintBtn=document.createElement('button'); hintBtn.className='pill-btn qbtn hint'; hintBtn.textContent='?';
    hintBtn.title='Hint'; hintBtn.onclick=function(){ openHint(item.hint||''); }; container.appendChild(hintBtn);
    var eye=document.createElement('button'); eye.className='pill-btn qbtn eye'; eye.textContent='üëÅ'; eye.title='Open source page';
    eye.onclick=function(){ var p=item.page||1; __openSourcePDF(p); }; container.appendChild(eye);
    if(!document.querySelector('.hint-overlay')){
      var ov=document.createElement('div'); ov.className='hint-overlay';
      ov.innerHTML = "<div class='hint-modal'><div class='hint-head'><strong>Hint</strong><button class='pill-btn' id='hintClose'>‚úñ</button></div><div class='hint-body'></div></div>";
      document.body.appendChild(ov);
      document.addEventListener('click', function(e){ if(e.target===ov) ov.style.display='none'; });
      document.getElementById('hintClose').onclick=function(){ ov.style.display='none'; };
    }
  }
})();
</script>

</head>
<body><a class='back' href='./'>‚Üê Back</a><script src='../assets/app.js'></script>
<main class="wrap" style="padding:0 12px">
  <section class="card" style="max-width:none;width:100%;min-height:86vh;display:flex;flex-direction:column">
    <div style="padding:16px 12px">
      <h1 style="margin-bottom:6px">Fill in the Blanks</h1>
      <div class="progress"><div class="bar" id="pbar"></div></div>
    </div>
    <div id="stage" style="flex:1;display:grid;place-items:center;padding:0 10px"></div>
  </section>
</main>
<div class='hint-overlay'><div class='hint-modal'><div class='hint-head'><strong>Hint</strong><button class='pill-btn' id='hintClose'>‚úñ</button></div><div class='hint-body'></div></div></div>
<script>
function el(t,c,h){ var d=document.createElement(t); if(c) d.className=c; if(h!=null) d.innerHTML=h; return d; }
function norm(s){ return (''+s).toLowerCase().replace(/\s+/g,''); }
var qs=[],i=0,correct=0;
function ensure50(a){ while(a.length<50) a=a.concat(a.slice(0, Math.min(50-a.length,a.length))); return a.slice(0, Math.max(50,a.length)); }
function renderQ(){
  var s=document.getElementById('stage'); s.innerHTML='';
  if(i>=qs.length){
    var pct=Math.round(100*correct/qs.length);
    s.innerHTML='<div class="qcard" style="text-align:center"><h2>Done!</h2><p>Score: <span class="badge '+(pct>=75?'badge-green':(pct>=40?'badge-yellow':'badge-red'))+'">'+correct+'/'+qs.length+' ('+pct+'%)</span></p><a class="pill-btn" href="./">Back to hub</a></div>';
    document.getElementById('pbar').style.width='100%';
    var key='progress_complex-analysis'; var prev=parseInt(localStorage.getItem(key)||'0',10)||0; if(pct>prev) localStorage.setItem(key, String(pct));
    return;
  }
  var q=qs[i]; document.getElementById('pbar').style.width=Math.round(100*i/qs.length)+'%';
  var card=el('div','qcard'); s.appendChild(card);
  var prompt=q.q; if(!/[?]$/.test(prompt)) prompt += '?';
  card.appendChild(el('h2',null,prompt));
  if(window.__bindQE) window.__bindQE(card, q);
  var input=el('input'); input.style.fontSize='22px'; input.style.padding='14px 18px'; input.style.minWidth='320px'; input.placeholder='Type your answer'; card.appendChild(input);
  var go=el('button','pill-btn','Submit'); go.style.fontSize='20px'; go.style.padding='14px 22px'; go.style.marginTop='12px'; card.appendChild(go);
  go.onclick=function(){ var val=norm(input.value); var ans=q.a; var ok=false; if(Array.isArray(ans)){ for(var j=0;j<ans.length;j++){ if(val===norm(ans[j])){ ok=true; break; } } } else { ok=(val===norm(ans)); } if(ok) correct++; i++; renderQ(); };
  input.addEventListener('keydown',function(e){ if(e.key==='Enter') go.click(); }); input.focus();
}
var x=new XMLHttpRequest(); x.onreadystatechange=function(){ if(x.readyState==4){ var data=JSON.parse(x.responseText); qs=ensure50(data); renderQ(); } }; x.open('GET','qbank.json',true); x.send();
</script>
</body></html>