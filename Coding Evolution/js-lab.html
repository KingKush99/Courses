<!doctype html><html lang="en"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>JS Lab</title>
<style>
body{font-family:system-ui,-apple-system,Segoe UI,Roboto;background:#0b1424;color:#e7ecf2;margin:0;padding:20px}
a{color:#23a7ff}.container{max-width:1000px;margin:0 auto}
h1{color:#cfe3ff}.btn{display:inline-block;padding:8px 12px;margin:4px;background:#152343;color:#e7ecf2;border-radius:8px;text-decoration:none;border:0;cursor:pointer}
textarea{width:100%}pre{background:#0a1222;padding:10px;border-radius:8px;white-space:pre-wrap}
iframe{width:100%;min-height:240px;border:1px solid #1f2a44;border-radius:8px;background:#0a1222}
.split{display:grid;gap:10px}@media(min-width:900px){.split{grid-template-columns:1fr 1fr}}
hr{border:none;border-top:1px solid #1f2a44;margin:16px 0}
</style>
</head><body><div class="container">
  <p><a class="btn" href="index.html">‚Üê Home</a></p>
  <h1>JavaScript Lab</h1>
  <textarea id="js" rows="8">console.log("Hello from JS!");</textarea><br>
  <button class="btn" id="run">Run</button>
  <button class="btn" id="clear">Clear</button>
  <div class="split" style="margin-top:10px">
    <iframe id="out"></iframe>
    <pre id="log"></pre>
  </div>
</div>
<script>
  const out = document.getElementById('out');
  const log = document.getElementById('log');
  const js = document.getElementById('js');

  const runnerHTML = [
    '<!doctype html><html><head><meta charset="utf-8"></head><body>',
    '<pre id="console" style="white-space:pre-wrap;margin:0;padding:10px;color:#e7ecf2;background:#0a1222"></pre>',
    '<script>',
    '(function(){',
      'const logEl = document.getElementById("console");',
      'const og = console.log;',
      'console.log = function(){ var a=[].slice.call(arguments).join(" "); og.apply(console, arguments); logEl.textContent += a + "\\n"; parent.postMessage({type:"log", data:a}, "*"); };',
      'window.addEventListener("message", function(e){',
        'if(!e.data) return;',
        'if(e.data.type==="reset"){ logEl.textContent=""; return; }',
        'if(e.data.type==="run-js"){ try{ new Function(e.data.code)(); }catch(err){ console.log("Error:", err.message); } }',
      '});',
      'parent.postMessage({type:"ready-js"}, "*");',
    '})();',
    '<' + '/script></body></html>'
  ].join("");

  const blob = new Blob([runnerHTML], {type:'text/html'});
  const url = URL.createObjectURL(blob);
  out.src = url;

  window.addEventListener('message', function(e){ if(e.data && e.data.type==="log") log.textContent += e.data.data + "\n"; });

  document.getElementById('run').onclick = function(){ out.contentWindow.postMessage({type:"run-js", code: js.value}, "*"); };
  document.getElementById('clear').onclick = function(){ log.textContent=''; out.contentWindow.postMessage({type:"reset"}, "*"); };
</script>
</body></html>
